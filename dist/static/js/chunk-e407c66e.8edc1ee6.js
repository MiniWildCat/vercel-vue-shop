(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e407c66e"],{"30c4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},[e.homePage?t("card",{attrs:{_Title:"我的订单",_Size:16,_Tabs:e.changeWay,_More:"全部订单",_Src:"/home/MyOrder"},on:{_Change:e.change}}):t("card",{attrs:{_Title:"我的订单",_Size:16,_Tabs:e.changeWay},on:{_Change:e.change}}),e.homePage?e._e():t("div",{staticClass:"mb_24 box"},[t("div",{staticClass:"global_float_right"},[t("Input",{staticClass:"width_300",attrs:{search:"","enter-button":"",placeholder:"请输入订单号搜索"},on:{"on-search":e.getList},model:{value:e.params.keywords,callback:function(t){e.$set(e.params,"keywords",t)},expression:"params.keywords"}})],1)]),0===e.orderList.length?t("empty"):t("div",{staticClass:"order-content"},[e._l(e.orderList,(function(a,s){return t("div",{key:s,staticClass:"order-list"},[t("div",{staticClass:"order-header"},[t("div",[t("div",[e._v(e._s(e.filterOrderStatus(a.orderStatus)))]),t("div",[e._v(" 订单号："+e._s(a.sn)+"      "+e._s(a.createTime)+" ")])]),t("div",["COMPLETED"===a.orderStatus?t("Button",{staticClass:"del-btn mr_10 fontsize_16",staticStyle:{"margin-top":"-5px"},attrs:{type:"text",icon:"ios-trash-outline",size:"small"},on:{click:function(t){return e.delOrder(a.sn)}}}):e._e(),t("span",[e._v(e._s(e._f("unitPrice")(a.flowPrice,"￥")))])],1)]),t("div",{staticClass:"order-body"},[t("div",{staticClass:"goods-list"},e._l(a.orderItems,(function(s,r){return t("div",{key:r},[t("img",{staticClass:"hover-color",attrs:{src:s.image,alt:""},on:{click:function(t){return e.goodsDetail(s.skuId,s.goodsId)}}}),t("div",[t("div",{staticClass:"hover-color",on:{click:function(t){return e.goodsDetail(s.skuId,s.goodsId)}}},[e._v(e._s(s.name))]),t("div",{staticClass:"mt_10"},[t("span",{staticClass:"global_color"},[e._v(e._s(e._f("unitPrice")(s.goodsPrice,"￥"))+" ")]),e._v("x "+e._s(s.num)+" "),t("span",{staticStyle:{"margin-left":"10px",color:"#ff9900"}},[e._v(e._s(e.refundPriceList(s.isRefund)))])]),"UNFINISHED"==s.commentStatus?t("Button",{staticClass:"fontsize_12",staticStyle:{position:"relative",top:"-22px",left:"190px","margin-right":"10px"},attrs:{size:"small",type:"success"},on:{click:function(t){return e.comment(a.sn,r)}}},[e._v("评价")]):e._e(),"NO_APPLY"==s.complainStatus?t("Button",{staticClass:"fontsize_12",staticStyle:{position:"relative",top:"-22px",left:"190px"},attrs:{type:"warning",size:"small"},on:{click:function(t){return e.complain(a.sn,r)}}},[e._v("投诉")]):e._e()],1)])})),0),t("div",[t("span",{on:{click:function(t){return e.shopPage(a.storeId)}}},[e._v(e._s(a.storeName))])]),t("div",[t("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.orderDetail(a.sn)}}},[e._v("订单详情")]),a.allowOperationVO.cancel?t("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.handleCancelOrder(a.sn)}}},[e._v("取消订单")]):e._e(),a.allowOperationVO.pay?t("Button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.goPay(a.sn)}}},[e._v("去支付")]):e._e(),a.allowOperationVO.rog?t("Button",{attrs:{size:"small",type:"warning"},on:{click:function(t){return e.received(a.sn)}}},[e._v("确认收货")]):e._e(),a.groupAfterSaleStatus&&(a.groupAfterSaleStatus.includes("NOT_APPLIED")||a.groupAfterSaleStatus.includes("PART_AFTER_SALE"))?t("Button",{attrs:{size:"small"},on:{click:function(t){return e.applyAfterSale(a.orderItems)}}},[e._v("申请售后")]):e._e()],1)])])})),e.spinShow?t("Spin",{attrs:{size:"large",fix:""}}):e._e()],2),e.homePage?e._e():t("div",{staticClass:"page-size"},[t("Page",{attrs:{total:e.total,"page-size":e.params.pageSize,"show-total":"","show-sizer":""},on:{"on-change":e.changePageNum,"on-page-size-change":e.changePageSize}})],1),t("Modal",{attrs:{title:"请选择申请售后的商品"},model:{value:e.afterSaleModal,callback:function(t){e.afterSaleModal=t},expression:"afterSaleModal"}},[t("div",[t("Table",{attrs:{border:"",columns:e.afterSaleColumns,data:e.afterSaleArr},on:{"on-row-click":e.afterSaleSelect}})],1),t("div",{attrs:{slot:"footer"},slot:"footer"})]),t("Modal",{attrs:{title:"请选择取消订单原因"},on:{"on-ok":e.sureCancel,"on-cancel":function(t){e.cancelAvail=!1}},model:{value:e.cancelAvail,callback:function(t){e.cancelAvail=t},expression:"cancelAvail"}},[t("RadioGroup",{attrs:{vertical:"",type:"button","button-style":"solid"},model:{value:e.cancelParams.reason,callback:function(t){e.$set(e.cancelParams,"reason",t)},expression:"cancelParams.reason"}},e._l(e.cancelReason,(function(a){return t("Radio",{key:a.id,attrs:{label:a.reason}},[e._v(" "+e._s(a.reason)+" ")])})),1)],1)],1)},r=[],n=a("f8b7"),i=a("8194"),o=a("9243"),l={name:"MyOrder",props:{homePage:{type:Boolean,default:!1}},data(){return{orderList:[],params:{pageNumber:1,pageSize:10,keywords:"",tag:"ALL"},cancelParams:{orderSn:"",reason:""},orderStatusList:o["b"],changeWay:["全部订单","待付款","待收货","已完成"],total:0,spinShow:!1,afterSaleModal:!1,afterSaleColumns:[{title:"商品名称",key:"name"},{title:"价格",key:"goodsPrice"}],afterSaleArr:[],cancelAvail:!1,cancelReason:[]}},mounted(){this.homePage&&(this.params.pageSize=5),this.getList()},methods:{refundPriceList(e){switch(e){case"ALL_REFUND":return"全部退款";case"PART_REFUND":return"部分退款";case"NO_REFUND":return"";case"REFUNDING":return"退款中";default:return""}},goodsDetail(e,t){let a=this.$router.resolve({path:"/goodsDetail",query:{skuId:e,goodsId:t}});window.open(a.href,"_blank")},change(e){switch(e){case 0:this.params.tag="ALL";break;case 1:this.params.tag="WAIT_PAY";break;case 2:this.params.tag="WAIT_ROG";break;case 3:this.params.tag="COMPLETE";break}this.getList()},shopPage(e){let t=this.$router.resolve({path:"/Merchant",query:{id:e}});window.open(t.href,"_blank")},orderDetail(e){this.$router.push({name:"OrderDetail",query:{sn:e}})},received(e){Object(n["k"])(e).then(e=>{e.success&&(this.$Message.success("确认收货成功"),this.getList())})},goPay(e){this.$router.push({path:"/payment",query:{orderType:"ORDER",sn:e}})},applyAfterSale(e){let t=[];e.forEach(e=>{"NOT_APPLIED"!==e.afterSaleStatus&&"PART_AFTER_SALE"!==e.afterSaleStatus||t.push(e)}),1===t.length?this.$router.push({name:"ApplyAfterSale",query:{sn:t[0].sn}}):(this.afterSaleArr=t,this.afterSaleModal=!0)},afterSaleSelect(e){this.$router.push({name:"ApplyAfterSale",query:{sn:e.sn}})},comment(e,t){this.$router.push({path:"/home/addEval",query:{sn:e,index:t}})},complain(e,t){this.$router.push({name:"Complain",query:{sn:e,index:t}})},delOrder(e){this.$Modal.confirm({title:"删除订单",content:"<p>确认删除当前订单吗？</p>",onOk:()=>{Object(n["d"])(e).then(e=>{e.success&&(this.$Message.success("删除成功"),this.getList())})},onCancel:()=>{}})},getList(){this.spinShow=!0;let e=JSON.parse(JSON.stringify(this.params));"ALL"===e.orderStatus&&delete e.orderStatus,Object(n["g"])(e).then(e=>{this.spinShow=!1,e.success&&(this.orderList=e.result.records,this.total=e.result.total)})},changePageNum(e){this.params.pageNumber=e,this.getList()},changePageSize(e){this.params.pageNumber=1,this.params.pageSize=e,this.getList()},handleCancelOrder(e){this.cancelParams.orderSn=e,Object(i["f"])("CANCEL").then(e=>{e.success&&(this.cancelReason=e.result,this.cancelAvail=!0,this.cancelParams.reason=this.cancelReason[0].reason)})},sureCancel(){Object(n["b"])(this.cancelParams).then(e=>{e.success&&(this.$Message.success("取消订单成功"),this.getList(),this.cancelAvail=!1)})},filterOrderStatus(e){const t=this.orderStatusList.filter(t=>t.status===e);return t&&t[0]?t[0].name:e}}},c=l,u=(a("9501"),a("2877")),d=Object(u["a"])(c,s,r,!1,null,"55609cee",null);t["default"]=d.exports},9243:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return r}));const s=[{name:"全部",status:"ALL"},{name:"未付款",status:"UNPAID"},{name:"已付款",status:"PAID"},{name:"待发货",status:"UNDELIVERED"},{name:"已发货",status:"DELIVERED"},{name:"已完成",status:"COMPLETED"},{name:"待核验",status:"TAKE"},{name:"已关闭",status:"CANCELLED"},{name:"待提货",status:"STAY_PICKED_UP"}],r=[{name:"申请中",status:"APPLY"},{name:"通过",status:"PASS"},{name:"拒绝",status:"REFUSE"},{name:"买家退货，待卖家收货",status:"BUYER_RETURN"},{name:"卖家确认收货",status:"SELLER_CONFIRM"},{name:"卖家终止售后",status:"SELLER_TERMINATION"},{name:"买家确认收货",status:"BUYER_CONFIRM"},{name:"买家取消售后",status:"BUYER_CANCEL"},{name:"完成售后",status:"COMPLETE"},{name:"等待平台退款",status:"WAIT_REFUND"}]},9501:function(e,t,a){"use strict";a("9757")},9757:function(e,t,a){}}]);