(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["npm.vue-piczoom"],{2448:function(t,i,e){},4037:function(t,i,e){"use strict";e("2448")},"86bd":function(t,i,e){"use strict";var s=function(){var t=this,i=t._self._c;return i("div",{ref:t.id,staticClass:"magnifier-box",class:t.vertical?"vertical":"",on:{mousemove:t.mousemove,mouseover:t.mouseover,mouseleave:t.mouseleave}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.showImg,expression:"showImg"}],attrs:{src:t.imgUrl,alt:""}}),i("div",{staticClass:"mouse-cover"}),t.showEidt?i("div",{staticClass:"edit-wrap"},[i("span",{staticClass:"rotate-left",on:{click:function(i){return t.rotate("left")}}}),i("span",{staticClass:"rotate-right",on:{click:function(i){return t.rotate("right")}}})]):t._e()])},h=[],o={props:{scale:{type:Number,default:2.5},url:{type:String,required:!0},bigUrl:{type:String,default:null},scroll:{type:Boolean,default:!1},showEidt:{type:Boolean,default:!1}},data(){return{id:null,cover:null,imgbox:null,imgwrap:null,orginUrl:null,bigImgUrl:null,bigOrginUrl:null,imgUrl:null,img:null,canvas:null,ctx:null,rectTimesX:0,rectTimesY:0,imgTimesX:0,imgTimesY:0,init:!1,step:0,bigStep:0,vertical:!1,showImg:!0}},created(){var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",i=t.length,e="";for(let s=0;s<10;s++)e+=t.charAt(Math.floor(Math.random()*i));this.id=e,this.imgUrl=this.url,this.orginUrl=this.url,this.bigImgUrl=this.bigUrl,this.bigOrginUrl=this.bigUrl},watch:{url:function(t){this.imgUrl=t,this.orginUrl=t,this.initTime()},bigUrl:function(){this.bigImgUrl=bigUrl,this.bigOrginUrl=bigUrl,this.initTime()}},mounted(){this.$nextTick(()=>{this.initTime()})},methods:{initTime(){this.init=!1;let t,i=this.$refs[this.id];this.imgbox=i,this.cover=i.querySelector(".mouse-cover"),this.cover.style.width=this.imgbox.offsetWidth/this.scale+"px",this.cover.style.height=this.imgbox.offsetHeight/this.scale+"px",this.cover.style.left="-100%",this.cover.style.top="-100%",this.imgwrap=i.querySelector("img"),t=this.bigImgUrl?this.bigImgUrl:this.imgUrl,this.img=new Image,this.img.src=t,this.img.onload=()=>{this.rectTimesX=this.imgbox.offsetWidth/this.scale/this.imgwrap.offsetWidth,this.rectTimesY=this.imgbox.offsetHeight/this.scale/this.imgwrap.offsetHeight,this.imgTimesX=this.img.width/this.imgwrap.offsetWidth,this.imgTimesY=this.img.height/this.imgwrap.offsetHeight,this.vertical=this.img.width<this.img.height,this.init=!0},this.canvas&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.canvas=document.createElement("canvas"),this.canvas.className="mouse-cover-canvas",this.canvas.style.position="absolute",this.canvas.style.left=this.imgbox.offsetLeft+this.imgbox.offsetWidth+10+"px",this.canvas.style.top=this.imgbox.offsetTop+"px",this.canvas.style.border="1px solid #eee",this.canvas.style.zIndex="99999",this.canvas.height=this.imgbox.offsetHeight,this.canvas.width=this.imgbox.offsetWidth,this.canvas.style.display="none",document.body.append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},initBox(){this.showImg=!1,this.canvas.style.display="none";let t,i=this.$refs[this.id];t=this.bigImgUrl?this.bigImgUrl:this.imgUrl,this.img=new Image,this.img.src=t,this.img.onload=()=>{this.vertical=this.img.width<this.img.height,this.showImg=!0;i.querySelector("img");setTimeout(()=>{this.rectTimesX=this.imgbox.offsetWidth/this.scale/i.querySelector("img").offsetWidth,this.rectTimesY=this.imgbox.offsetHeight/this.scale/i.querySelector("img").offsetHeight},20)}},mousemove(t){if(!this.init)return!1;let i=this;function e(t){var i=null,e=null,s=t.offsetParent;i+=t.offsetLeft,e+=t.offsetTop;while(s)-1===navigator.userAgent.indexOf("MSIE 8.0")&&(i+=s.clientLeft,e+=s.clientTop),i+=s.offsetLeft,e+=s.offsetTop,s=s.offsetParent;return{left:i,top:e}}function s(t){return{x:t.clientX-i.cover.offsetWidth/2,y:t.clientY-i.cover.offsetHeight/2}}let h=t||event,o=s(h),r=e(this.imgwrap),a={minX:r.left,maxX:r.left+this.imgwrap.offsetWidth-this.cover.offsetWidth,minY:r.top-document.documentElement.scrollTop,maxY:r.top-document.documentElement.scrollTop+this.imgwrap.offsetHeight-this.cover.offsetHeight};o.x>a.maxX&&(o.x=a.maxX),o.x<a.minX&&(o.x=a.minX),o.y>a.maxY&&(o.y=a.maxY),o.y<a.minY&&(o.y=a.minY),this.cover.style.left=o.x+"px",this.cover.style.top=o.y+"px",this.ctx.clearRect(0,0,this.imgwrap.offsetWidth,this.imgwrap.offsetHeight);let n=o.x-(r.left-document.documentElement.scrollLeft),l=o.y-(r.top-document.documentElement.scrollTop);this.ctx.drawImage(this.img,n*this.imgTimesX,l*this.imgTimesY,this.img.width*this.rectTimesX,this.img.height*this.rectTimesY,0,0,this.imgbox.offsetWidth,this.imgbox.offsetHeight)},mouseover(t){if(!this.init)return!1;t=t||event,this.scroll||(t.currentTarget.addEventListener("mousewheel",(function(t){t.preventDefault()}),!1),t.currentTarget.addEventListener("DOMMouseScroll",(function(t){t.preventDefault()}),!1)),this.cover.style.display="block",this.canvas.style.display="block"},mouseleave(){if(!this.init)return!1;this.cover.style.display="none",this.canvas.style.display="none"},rotate(t){var i=new Image;if(i.crossOrigin="Anonymous",i.src=this.orginUrl,i.onload=()=>{this.rotateImg(i,t,this.step)},this.bigOrginUrl){var e=new Image;i.crossOrigin="Anonymous",e.src=this.bigOrginUrl,e.onload=()=>{this.rotateImg(e,t,this.bigStep,!0)}}},rotateImg(t,i,e,s=!1){var h=0,o=3;if(null!=t){var r=t.height,a=t.width;null==e&&(e=h),"right"==i?(e++,e>o&&(e=h)):(e--,e<h&&(e=o));var n=document.createElement("canvas"),l=90*e*Math.PI/180,m=n.getContext("2d");switch(n.width=r,n.height=a,m.rotate(l),m.drawImage(t,0,-r),e){case 0:n.width=a,n.height=r,m.drawImage(t,0,0);break;case 1:n.width=r,n.height=a,m.rotate(l),m.drawImage(t,0,-r);break;case 2:n.width=a,n.height=r,m.rotate(l),m.drawImage(t,-a,-r);break;case 3:n.width=r,n.height=a,m.rotate(l),m.drawImage(t,-a,0);break}var g=n.toDataURL();s?(this.bigImgUrl=g,this.bigStep=e,this.initBox()):(this.imgUrl=g,this.step=e,this.$nextTick(()=>{this.initBox()}))}}}},r=o,a=(e("4037"),e("2877")),n=Object(a["a"])(r,s,h,!1,null,"69c01ff0",null);i["a"]=n.exports}}]);