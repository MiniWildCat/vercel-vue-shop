(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-463aaa72"],{"351e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-detail"},[e("card",{attrs:{_Title:"售后详情",_Size:16}}),"PASS"==t.afterSale.serviceStatus&&"RETURN_MONEY"!=t.afterSale.serviceType||t.afterSale.afterSaleAllowOperationVO&&t.afterSale.afterSaleAllowOperationVO.cancel?e("Card",{staticClass:"mb_10"},["PASS"==t.afterSale.serviceStatus&&"RETURN_MONEY"!=t.afterSale.serviceType?e("Button",{attrs:{type:"success",size:"small"},on:{click:t.openModal}},[t._v("提交物流")]):t._e(),t._v("  "),t.afterSale.afterSaleAllowOperationVO&&t.afterSale.afterSaleAllowOperationVO.cancel?e("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.cancel(t.afterSale.sn)}}},[t._v("取消售后")]):t._e()],1):t._e(),e("div",{staticClass:"order-card"},[e("h3",[t._v(t._s(t.afterSale.serviceName))]),e("p",{staticClass:"global_color fontsize_18"},[t._v(t._s(t.afterSale.orderStatusValue))]),e("p",[t._v("售后单号："+t._s(t.afterSale.sn)+"    订单号："+t._s(t.afterSale.orderSn))]),e("div",{staticClass:"operation-time",staticStyle:{color:"#999"}},[t._v("创建时间："+t._s(t.afterSale.createTime))]),e("div",{staticClass:"service-after"},[e("div",[t._v(" 本次售后服务由"),e("span",[t._v(t._s(t.afterSale.storeName))]),t._v("为您提供 ")]),e("div",[e("img",{attrs:{src:t.afterSale.goodsImage,alt:"",width:"60",height:"60"}}),e("span",[t._v(t._s(t.afterSale.goodsName))])])])]),e("div",{staticClass:"order-card"},[e("h3",[t._v("售后进程")]),e("Steps",{staticClass:"progress",attrs:{current:t.logList.length,direction:"vertical"}},t._l(t.logList,(function(t,a){return e("Step",{key:a,attrs:{content:"操作人："+t.operatorName+"   "+t.createTime,title:t.message}})})),1)],1),e("div",{staticClass:"order-card"},[e("h3",{staticClass:"mb_10"},[t._v("服务单信息")]),e("table",{attrs:{border:"1",cellpadding:"0",cellspacing:"0"}},[e("tr",[e("td",[t._v("退款方式")]),e("td",[t._v(t._s("ORIGINAL"==t.afterSale.refundWay?"原路退回":"账号退款"))])]),e("tr",[e("td",[t._v("申请退款金额")]),e("td",[t._v(t._s(t._f("unitPrice")(t.afterSale.applyRefundPrice,"￥")))])]),t.afterSale.actualRefundPrice?e("tr",[e("td",[t._v("实际退款金额")]),e("td",[t._v(t._s(t._f("unitPrice")(t.afterSale.actualRefundPrice,"￥")))])]):t._e(),"OFFLINE"===t.afterSale.refundWay?[e("tr",[e("td",[t._v("退款开户行")]),e("td",[t._v(t._s(t.afterSale.bankDepositName))])]),e("tr",[e("td",[t._v("退款开户名")]),e("td",[t._v(t._s(t.afterSale.bankAccountName))])]),e("tr",[e("td",[t._v("退款卡号")]),e("td",[t._v(t._s(t.afterSale.bankAccountNumber))])])]:t._e(),e("tr",[e("td",[t._v("商品处理方式")]),e("td",[t._v(t._s("RETURN_MONEY"==t.afterSale.serviceType?"退款":"退货"))])]),e("tr",[e("td",[t._v("退款原因")]),e("td",[t._v(t._s(t.afterSale.reasonName))])]),e("tr",[e("td",[t._v("问题描述")]),e("td",[t._v(t._s(t.afterSale.problemDesc))])])],2)]),t.afterSale.afterSaleImage?e("div",{staticClass:"order-card"},[e("h3",{staticClass:"mb_10"},[t._v("图片信息")]),t._l(t.afterSale.afterSaleImage.split(","),(function(a){return e("div",{key:a},[e("img",{staticClass:"hover-pointer",attrs:{src:a,width:"200",height:"200",alt:""},on:{click:function(e){return t.perviewImg(a)}}})])}))],2):t._e(),e("Modal",{attrs:{width:"530"},model:{value:t.logisticsShow,callback:function(e){t.logisticsShow=e},expression:"logisticsShow"}},[e("p",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("提交物流信息")])]),e("div",[e("Form",{ref:"form",attrs:{model:t.form,"label-position":"left","label-width":100,rules:t.rules}},[e("FormItem",{attrs:{label:"物流公司",prop:"logisticsId"}},[e("Select",{attrs:{placeholder:"请选择物流公司"},model:{value:t.form.logisticsId,callback:function(e){t.$set(t.form,"logisticsId",e)},expression:"form.logisticsId"}},t._l(t.companyList,(function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1),e("FormItem",{attrs:{label:"物流单号",prop:"logisticsNo"}},[e("Input",{attrs:{placeholder:"请填写物流单号"},model:{value:t.form.logisticsNo,callback:function(e){t.$set(t.form,"logisticsNo",e)},expression:"form.logisticsNo"}})],1),e("FormItem",{attrs:{label:"发货时间",prop:"mDeliverTime"}},[e("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择发货时间"},on:{"on-change":t.changeTime},model:{value:t.form.mDeliverTime,callback:function(e){t.$set(t.form,"mDeliverTime",e)},expression:"form.mDeliverTime"}})],1)],1)],1),e("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:function(e){t.logisticsShow=!1}}},[t._v("关闭")]),e("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitDelivery}},[t._v("提交")])],1)])],1)},r=[],i=a("8194"),l=a("f8b7"),o=a("9243"),n={name:"aftersale-detail",data(){return{afterSale:{},logList:[],reasonList:[],afterSaleStatusList:o["a"],companyList:[],logisticsShow:!1,form:{afterSaleSn:"",logisticsId:"",logisticsNo:"",mDeliverTime:""},rules:{logisticsId:[{required:!0,message:"请选择物流公司"}],logisticsNo:[{required:!0,message:"请填写物流编号"}],mDeliverTime:[{required:!0,message:"请选择发货时间"}]},submitLoading:!1}},methods:{getDetail(){Object(i["b"])(this.$route.query.sn).then(t=>{if(t.success){this.afterSale=t.result,this.afterSale.serviceName=this.filterOrderStatus(this.afterSale.serviceStatus);const e=new RegExp("[0-9]+");e.test(this.afterSale.reason)?this.getReason(this.afterSale.serviceType):this.$set(this.afterSale,"reasonName",this.afterSale.reason)}})},getReason(t){Object(i["f"])(t).then(t=>{t.success&&(this.reasonList=t.result,this.reasonList.forEach(t=>{t.id===this.afterSale.reason&&this.$set(this.afterSale,"reasonName",t.reason)}))})},getLog(){Object(i["e"])(this.$route.query.sn).then(t=>{this.logList=t.result})},filterOrderStatus(t){const e=this.afterSaleStatusList.filter(e=>e.status===t);if(e.length)return e[0].name},perviewImg(t){window.open(t,"_blank")},cancel(t){this.$Modal.confirm({title:"取消",content:"<p>确定取消此次售后申请吗？</p>",onOk:()=>{Object(i["j"])(t).then(t=>{t.success&&(this.$Message.success("取消售后申请成功"),this.getDetail())})},onCancel:()=>{}})},getCompany(){Object(l["f"])().then(t=>{t.success&&(this.companyList=t.result)})},submitDelivery(){this.submitLoading=!0,Object(l["a"])(this.form).then(t=>{t.success&&(this.logisticsShow=!1,this.$Message.success("提交成功"),this.getDetail()),this.submitLoading=!1}).catch(()=>{this.submitLoading=!1})},openModal(){this.form.afterSaleSn=this.afterSale.sn,this.logisticsShow=!0,this.$refs.form.resetFields(),this.companyList.length||this.getCompany()},changeTime(t){this.form.mDeliverTime=t}},mounted(){this.getDetail(),this.getLog()}},c=n,u=(a("60d5"),a("2877")),m=Object(u["a"])(c,s,r,!1,null,"a04c9a74",null);e["default"]=m.exports},"3a7a":function(t,e,a){},"60d5":function(t,e,a){"use strict";a("3a7a")},9243:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r}));const s=[{name:"全部",status:"ALL"},{name:"未付款",status:"UNPAID"},{name:"已付款",status:"PAID"},{name:"待发货",status:"UNDELIVERED"},{name:"已发货",status:"DELIVERED"},{name:"已完成",status:"COMPLETED"},{name:"待核验",status:"TAKE"},{name:"已关闭",status:"CANCELLED"},{name:"待提货",status:"STAY_PICKED_UP"}],r=[{name:"申请中",status:"APPLY"},{name:"通过",status:"PASS"},{name:"拒绝",status:"REFUSE"},{name:"买家退货，待卖家收货",status:"BUYER_RETURN"},{name:"卖家确认收货",status:"SELLER_CONFIRM"},{name:"卖家终止售后",status:"SELLER_TERMINATION"},{name:"买家确认收货",status:"BUYER_CONFIRM"},{name:"买家取消售后",status:"BUYER_CANCEL"},{name:"完成售后",status:"COMPLETE"},{name:"等待平台退款",status:"WAIT_REFUND"}]}}]);