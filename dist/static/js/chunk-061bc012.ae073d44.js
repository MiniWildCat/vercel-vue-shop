(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-061bc012"],{"2c45":function(e,t,s){"use strict";s("6a21")},"6a21":function(e,t,s){},"7dfd":function(e,t,s){"use strict";s.r(t),s.d(t,"mobile",(function(){return o})),s.d(t,"email",(function(){return a})),s.d(t,"password",(function(){return r})),s.d(t,"integer",(function(){return n})),s.d(t,"Integer",(function(){return i})),s.d(t,"money",(function(){return l})),s.d(t,"TINumber",(function(){return c})),s.d(t,"IDCard",(function(){return u})),s.d(t,"userName",(function(){return d})),s.d(t,"URL",(function(){return m})),s.d(t,"TEL",(function(){return p})),s.d(t,"licenseNum",(function(){return f}));const o=/^0?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/,a=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,r=/^[@A-Za-z0-9!#$%^&*.~,]{6,20}$/,n=/^[1-9]\d*$/,i=/^[0-9]\d*$/,l=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,c=/^((\d{6}[0-9A-Z]{9})|([0-9A-Za-z]{2}\d{6}[0-9A-Za-z]{10,12}))$/,u=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,d=/[A-Za-z0-9_\-\u4e00-\u9fa5]$/,m=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,p=/0\d{2,3}-\d{7,8}/,f=/(^(?:(?![IOZSV])[\dA-Z]){2}\d{6}(?:(?![IOZSV])[\dA-Z]){10}$)|(^\d{15}$)/},f6d8:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"apply-after-sale"},[t("card",{attrs:{_Title:"申请售后"}}),t("Table",{attrs:{border:"",columns:e.columns,data:e.goodsData},scopedSlots:e._u([{key:"goodsName",fn:function({row:s}){return[t("div",{staticStyle:{padding:"5px",display:"flex"}},[t("img",{staticStyle:{"vertical-align":"top"},attrs:{src:s.image,width:"60",height:"60",alt:""}}),e._v(" "),t("span",{staticClass:"ml_10"},[e._v(e._s(s.goodsName))])])]}},{key:"goodsPrice",fn:function({row:s}){return[t("div",[e._v(e._s(e._f("unitPrice")(s.applyRefundPrice,"￥")))])]}}])}),t("div",[t("Form",{ref:"form",staticClass:"mt_10",attrs:{model:e.form,rules:e.rules,"label-width":80}},[t("FormItem",{attrs:{label:"售后类别"}},[t("RadioGroup",{attrs:{type:"button","button-style":"solid"},on:{"on-change":e.changeReason},model:{value:e.form.serviceType,callback:function(t){e.$set(e.form,"serviceType",t)},expression:"form.serviceType"}},[e.info.returnGoods?t("Radio",{attrs:{label:"RETURN_GOODS"}},[e._v("退货")]):e._e(),e.info.returnMoney?t("Radio",{attrs:{label:"RETURN_MONEY"}},[e._v("退款")]):e._e()],1)],1),t("FormItem",{attrs:{label:"提交数量",prop:"num"}},[t("Input",{staticStyle:{width:"260px"},attrs:{type:"number"},model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}})],1),t("FormItem",{attrs:{label:"提交原因",prop:"reason"}},[t("Select",{staticStyle:{width:"260px"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}},e._l(e.reasonList,(function(s){return t("Option",{key:s.id,attrs:{value:s.id}},[e._v(e._s(s.reason))])})),1)],1),t("FormItem",{attrs:{label:"问题描述",prop:"problemDesc"}},[t("Input",{staticStyle:{width:"260px"},attrs:{type:"textarea",rows:4,maxlength:"500","show-word-limit":""},model:{value:e.form.problemDesc,callback:function(t){e.$set(e.form,"problemDesc",t)},expression:"form.problemDesc"}})],1),t("FormItem",{attrs:{label:"图片信息"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[e._l(e.uploadList,(function(s,o){return t("div",{key:o,staticClass:"demo-upload-list"},[t("img",{attrs:{src:s}}),t("div",{staticClass:"demo-upload-list-cover"},[t("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(t){return e.handleView(s)}}}),t("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleRemove(o)}}})],1)])})),t("Upload",{staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":e.handleSuccess,"before-upload":e.handleBeforeUpload,format:["jpg","jpeg","png"],action:e.action,headers:e.accessToken}},[t("div",{staticClass:"hover-pointer icon-upload"},[t("Icon",{attrs:{type:"md-add",size:"20"}})],1)])],2)]),t("FormItem",{attrs:{label:"退款方式"}},[t("div",[e._v(e._s("ORIGINAL"==e.info.refundWay?"原路退回":"账号退款"))])]),"BANK_TRANSFER"===e.info.accountType&&0!=e.info.applyRefundPrice?[t("FormItem",{attrs:{label:"开户行",prop:"bankDepositName"}},[t("Input",{staticStyle:{width:"260px"},attrs:{type:"text",placeholder:"请输入银行开户行"},model:{value:e.form.bankDepositName,callback:function(t){e.$set(e.form,"bankDepositName",t)},expression:"form.bankDepositName"}})],1),t("FormItem",{attrs:{label:"开户名",prop:"bankAccountName"}},[t("Input",{staticStyle:{width:"260px"},attrs:{type:"text",placeholder:"请输入银行开户名"},model:{value:e.form.bankAccountName,callback:function(t){e.$set(e.form,"bankAccountName",t)},expression:"form.bankAccountName"}})],1),t("FormItem",{attrs:{label:"银行账号",prop:"bankAccountNumber"}},[t("Input",{staticStyle:{width:"260px"},attrs:{type:"text",placeholder:"请输入银行账号"},model:{value:e.form.bankAccountNumber,callback:function(t){e.$set(e.form,"bankAccountNumber",t)},expression:"form.bankAccountNumber"}})],1)]:e._e(),"RETURN_GOODS"===e.form.serviceType?t("FormItem",{attrs:{label:"返回方式"}},[t("div",[e._v("快递至第三方卖家")])]):e._e(),t("FormItem",[t("Button",{attrs:{type:"primary"},on:{click:e.apply}},[e._v("提交申请")])],1)],2),t("Modal",{attrs:{title:"View Image"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?t("img",{staticStyle:{width:"100%"},attrs:{src:e.previewImage}}):e._e()])],1)],1)},a=[],r=s("8194"),n=s("ff66"),i=s("e487"),l=s("7dfd"),c={data(){const e=(e,t,s)=>{""===t?(console.log(l),s(new Error("请填写提交数量"))):t>this.info.num?s(new Error("提交数量不能大于购买数量")):l["integer"].test(t)?s():s(new Error("提交数量必须为正整数"))};return{columns:[{title:"商品名称",slot:"goodsName"},{title:"价格",slot:"goodsPrice"},{title:"购买数量",key:"num"}],goodsData:[],reasonList:[],info:{},form:{serviceType:"RETURN_GOODS",num:1},uploadList:[],action:n["c"]+"/common/common/upload/file",accessToken:{},visible:!1,previewImage:"",rules:{num:[{validator:e}],reason:[{required:!0,message:"请选择提交原因"}],problemDesc:[{required:!0,message:"请输入问题描述"}],bankAccountNumber:[{required:!0,message:"请输入银行卡号"},{type:"string",pattern:/^[0-9]\d*$/,message:"请输入正确的银行卡号"}],bankAccountName:[{required:!0,message:"请输入银行开户名"}],bankDepositName:[{required:!0,message:"请输入银行开户行"}]}}},methods:{getInfo(){Object(r["c"])(this.$route.query.sn).then(e=>{e.success&&(this.info=e.result,this.goodsData.push(e.result),!this.info.returnGoods&&this.info.returnMoney&&(this.form.serviceType="RETURN_MONEY"),this.getReason(this.form.serviceType))})},getReason(e){Object(r["f"])(e).then(e=>{e.success&&(this.reasonList=e.result)})},changeReason(e){this.getReason(e)},apply(){this.$refs.form.validate(e=>{if(e){let e=Object.assign(this.info,this.form);e.images=this.uploadList.toString(),e.orderItemSn=this.$route.query.sn,e.reason=this.reasonList.find(t=>t.id==e.reason).reason,Object(r["g"])(e).then(e=>{e.success&&(this.$Message.success("售后申请提交成功，请到售后订单查看！"),this.$router.push({name:"AfterSale"}))})}})},handleView(e){this.previewImage=e,this.visible=!0},handleRemove(e){this.uploadList.splice(e,1),this.$forceUpdate()},handleSuccess(e,t){this.uploadList.push(e.result),this.$forceUpdate()},handleBeforeUpload(){const e=this.uploadList.length<6;if(!e)return this.$Notice.warning({title:"最多可以上传5张图片"}),e}},mounted(){this.accessToken.accessToken=i["a"].getItem("accessToken"),this.getInfo()}},u=c,d=(s("2c45"),s("2877")),m=Object(d["a"])(u,o,a,!1,null,"2fe31457",null);t["default"]=m.exports}}]);