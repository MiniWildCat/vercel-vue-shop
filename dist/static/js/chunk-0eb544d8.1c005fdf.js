(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0eb544d8"],{"2d2f":function(t,e,s){"use strict";s("86f4")},"7dfd":function(t,e,s){"use strict";s.r(e),s.d(e,"mobile",(function(){return a})),s.d(e,"email",(function(){return o})),s.d(e,"password",(function(){return r})),s.d(e,"integer",(function(){return i})),s.d(e,"Integer",(function(){return n})),s.d(e,"money",(function(){return c})),s.d(e,"TINumber",(function(){return l})),s.d(e,"IDCard",(function(){return d})),s.d(e,"userName",(function(){return u})),s.d(e,"URL",(function(){return p})),s.d(e,"TEL",(function(){return m})),s.d(e,"licenseNum",(function(){return g}));const a=/^0?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/,o=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,r=/^[@A-Za-z0-9!#$%^&*.~,]{6,20}$/,i=/^[1-9]\d*$/,n=/^[0-9]\d*$/,c=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,l=/^((\d{6}[0-9A-Z]{9})|([0-9A-Za-z]{2}\d{6}[0-9A-Za-z]{10,12}))$/,d=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,u=/[A-Za-z0-9_\-\u4e00-\u9fa5]$/,p=/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,m=/0\d{2,3}-\d{7,8}/,g=/(^(?:(?![IOZSV])[\dA-Z]){2}\d{6}(?:(?![IOZSV])[\dA-Z]){10}$)|(^\d{15}$)/},"86f4":function(t,e,s){},c222:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("card",{attrs:{_Title:"我的分销"}}),0===t.status?e("div",[e("Alert",{attrs:{type:"warning"}},[t._v("分销商申请")]),e("Form",{ref:"form",attrs:{model:t.applyForm,rules:t.rules}},[e("FormItem",{attrs:{label:"姓名",prop:"name"}},[e("Input",{model:{value:t.applyForm.name,callback:function(e){t.$set(t.applyForm,"name",e)},expression:"applyForm.name"}})],1),e("FormItem",{attrs:{label:"身份证号",prop:"idNumber"}},[e("Input",{model:{value:t.applyForm.idNumber,callback:function(e){t.$set(t.applyForm,"idNumber",e)},expression:"applyForm.idNumber"}})],1),e("FormItem",{attrs:{label:"银行开户行",prop:"settlementBankBranchName"}},[e("Input",{model:{value:t.applyForm.settlementBankBranchName,callback:function(e){t.$set(t.applyForm,"settlementBankBranchName",e)},expression:"applyForm.settlementBankBranchName"}})],1),e("FormItem",{attrs:{label:"银行开户名",prop:"settlementBankAccountName"}},[e("Input",{model:{value:t.applyForm.settlementBankAccountName,callback:function(e){t.$set(t.applyForm,"settlementBankAccountName",e)},expression:"applyForm.settlementBankAccountName"}})],1),e("FormItem",{attrs:{label:"银行账号",prop:"settlementBankAccountNum"}},[e("Input",{model:{value:t.applyForm.settlementBankAccountNum,callback:function(e){t.$set(t.applyForm,"settlementBankAccountNum",e)},expression:"applyForm.settlementBankAccountNum"}})],1),e("FormItem",[e("Button",{attrs:{type:"primary",loading:t.applyLoading},on:{click:t.apply}},[t._v("提交申请")])],1)],1)],1):t._e(),1===t.status?e("div",[e("Alert",{attrs:{type:"success"}},[t._v(" 您提交的信息正在审核 "),e("template",{slot:"desc"},[t._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):t._e(),2===t.status?e("div",[t._m(0),e("div",{staticClass:"box"},[e("div",{staticClass:"mb_20 account-price"},[e("span",{staticClass:"subTips"},[t._v("可提现金额：")]),e("span",{staticClass:"fontsize_48 global_color"},[t._v("￥"+t._s(t._f("unitPrice")(t.result.canRebate)))]),e("span",{staticClass:"subTips"},[t._v("冻结金额：")]),e("span",{},[t._v("￥"+t._s(t._f("unitPrice")(t.result.commissionFrozen)))]),e("span",{staticClass:"subTips"},[t._v("返利总金额：")]),e("span",{},[t._v("￥"+t._s(t._f("unitPrice")(t.result.rebateTotal)))]),e("Button",{staticClass:"ml_20",attrs:{type:"primary",size:"small"},on:{click:function(e){t.withdrawApplyModal=!0}}},[t._v("申请提现")])],1)]),e("Tabs",{attrs:{value:t.tabName},on:{"on-click":t.tabPaneChange}},[e("TabPane",{attrs:{label:"已选商品",name:"goodsChecked"}},[e("Table",{attrs:{stripe:"",columns:t.goodsColumns,data:t.goodsData.records},scopedSlots:t._u([{key:"name",fn:function({row:s}){return[e("div",{staticClass:"goods-msg",on:{click:function(e){return t.linkTo(`/goodsDetail?skuId=${s.skuId}&goodsId=${s.goodsId}`)}}},[e("img",{staticStyle:{"vertical-align":"top"},attrs:{src:s.thumbnail,width:"60",height:"60",alt:""}}),t._v("  "+t._s(s.goodsName)+" ")])]}},{key:"price",fn:function({row:s}){return[e("span",[t._v(" ￥"+t._s(t._f("unitPrice")(s.price)))])]}},{key:"commission",fn:function({row:s}){return[e("span",[t._v(" ￥"+t._s(t._f("unitPrice")(s.commission)))])]}},{key:"action",fn:function({row:s}){return[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.fenxiao(s)}}},[t._v("分销商品")]),e("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.selectGoods(s.id,!1)}}},[t._v("取消选择")])]}}],null,!1,1142277250)}),e("div",{staticClass:"page-size"},[e("Page",{attrs:{current:t.params.pageNumber,total:t.goodsData.total,"page-size":t.params.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":t.changePage}})],1)],1),e("TabPane",{attrs:{label:"未选商品",name:"goodsUncheck"}},[e("Table",{attrs:{stripe:"",columns:t.goodsColumns,data:t.goodsData.records},scopedSlots:t._u([{key:"name",fn:function({row:s}){return[e("div",{staticClass:"goods-msg",on:{click:function(e){return t.linkTo(`/goodsDetail?skuId=${s.skuId}&goodsId=${s.goodsId}`)}}},[e("img",{staticStyle:{"vertical-align":"top"},attrs:{src:s.thumbnail,width:"60",height:"60",alt:""}}),t._v("  "+t._s(s.goodsName)+" ")])]}},{key:"price",fn:function({row:s}){return[e("span",[t._v(" ￥"+t._s(t._f("unitPrice")(s.price)))])]}},{key:"commission",fn:function({row:s}){return[e("span",[t._v(" ￥"+t._s(t._f("unitPrice")(s.commission)))])]}},{key:"action",fn:function({row:s}){return[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.selectGoods(s.id,!0)}}},[t._v("选择商品")])]}}],null,!1,724206304)}),e("div",{staticClass:"page-size"},[e("Page",{attrs:{current:t.params.pageNumber,total:t.goodsData.total,"page-size":t.params.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":t.changePage}})],1)],1),e("TabPane",{attrs:{label:"提现记录",name:"log"}},[e("Table",{attrs:{stripe:"",columns:t.logColumns,data:t.logData.records},scopedSlots:t._u([{key:"sn",fn:function({row:s}){return[e("span",[t._v(t._s(s.sn))])]}},{key:"time",fn:function({row:s}){return[e("span",[t._v(t._s(s.createTime))])]}},{key:"price",fn:function({row:s}){return["VIA_AUDITING"==s.distributionCashStatus?e("span",{staticStyle:{color:"green"}},[t._v(" +￥"+t._s(t._f("unitPrice")(s.price)))]):e("span",{staticStyle:{color:"red"}},[t._v(" -￥"+t._s(t._f("unitPrice")(s.price)))])]}},{key:"status",fn:function({row:s}){return[e("span",[t._v(" "+t._s("APPLY"==s.distributionCashStatus?"待处理":"VIA_AUDITING"==s.distributionCashStatus?"通过":"拒绝"))])]}}],null,!1,124371129)}),e("div",{staticClass:"page-size"},[e("Page",{attrs:{current:t.logParams.pageNumber,total:t.logData.total,"page-size":t.logParams.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":t.changePageLog}})],1)],1)],1)],1):t._e(),3===t.status?e("div",[e("Alert",{attrs:{type:"error"}},[t._v(" 分销功能暂未开启 "),e("template",{slot:"desc"},[t._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):t._e(),4===t.status?e("div",[e("Alert",{attrs:{type:"error"}},[t._v(" 您的分销资格已被清退。请联系管理员或进行申诉 "),e("Button",{staticStyle:{"margin-left":"50px"},attrs:{type:"warning"},on:{click:t.repaying}},[t._v("申诉")])],1)],1):t._e(),5===t.status?e("div",[e("Alert",{attrs:{type:"success"}},[t._v(" 您提交的申诉正在审核 "),e("template",{slot:"desc"},[t._v("提交认证申请后，工作人员将在三个工作日进行核对完成审核")])],2)],1):t._e(),e("Modal",{attrs:{width:"530"},model:{value:t.withdrawApplyModal,callback:function(e){t.withdrawApplyModal=e},expression:"withdrawApplyModal"}},[e("p",{attrs:{slot:"header"},slot:"header"},[e("Icon",{attrs:{type:"edit"}}),e("span",[t._v("提现金额")])],1),e("div",[e("Input",{attrs:{size:"large",number:"",maxlength:"9"},model:{value:t.withdrawPrice,callback:function(e){t.withdrawPrice=e},expression:"withdrawPrice"}},[e("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1),e("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary",size:"large"},on:{click:t.withdraw}},[t._v("提现")])],1)]),e("Modal",{attrs:{title:"分销商品",width:"800"},model:{value:t.qrcodeShow,callback:function(e){t.qrcodeShow=e},expression:"qrcodeShow"}},[e("Alert",{attrs:{type:"warning"}},[t._v(" 下载二维码或者复制链接分享商品 ")]),e("div",{staticClass:"qrcode"},[e("div",{staticStyle:{width:"150px",height:"150px",border:"1px solid #eee"}},[e("vue-qr",{attrs:{text:t.qrcode,callback:t.qrcodeData,margin:0,colorDark:"#000",colorLight:"#fff",size:150}}),e("div",{staticClass:"qrcode-platform"},[t._v("PC端")]),e("Button",{staticClass:"download-btn",attrs:{type:"success"},on:{click:t.downloadQrcode}},[t._v("下载二维码")])],1),e("div",{staticStyle:{width:"150px",height:"150px",border:"1px solid #eee"}},[e("vue-qr",{attrs:{text:t.qrcodeH5,callback:t.qrcodeDataH5,margin:0,colorDark:"#000",colorLight:"#fff",size:150}}),e("div",{staticClass:"qrcode-platform"},[t._v("移动应用端")]),e("Button",{staticClass:"download-btn",attrs:{type:"success"},on:{click:t.downloadQrcodeH5}},[t._v("下载二维码")])],1)]),e("div",{staticClass:"mt_10",staticStyle:{"margin-top":"100px"}},[t._v(" 商品链接："),e("Input",{staticStyle:{width:"600px"},model:{value:t.qrcode,callback:function(e){t.qrcode=e},expression:"qrcode"}})],1)],1)],1)},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"tips"},[e("p",[t._v("分销下线付款之后会生成分销订单。")]),e("p",[t._v(" 冻结金额：用户提现金额即为冻结金额，审核通过后扣除冻结金额，审核拒绝之后冻结金额返回可提现金额。 ")]),e("p",[t._v("可提现金额：分销订单佣金T+1解冻后可变为可提现金额。")])])}],r=s("8194"),i=s("7dfd"),n=(s("a63b"),s("658f")),c=s.n(n),l={name:"Distribution",components:{vueQr:c.a},data(){return{config:s("f121"),status:0,applyForm:{},rules:{name:[{required:!0,message:"请输入真实姓名"}],idNumber:[{required:!0,message:"请输入身份证号"},{pattern:i["IDCard"],message:"请输入正确的身份证号"}],settlementBankBranchName:[{required:!0,message:"请输入银行开户行",trigger:"blur"}],settlementBankAccountName:[{required:!0,message:"请输入银行开户名",trigger:"blur"}],settlementBankAccountNum:[{required:!0,message:"银行账号不正确",trigger:"blur"}]},tabName:"goodsChecked",result:{},applyLoading:!1,goodsLoading:!1,withdrawApplyModal:!1,withdrawPrice:0,goodsData:{},logData:{},goodsColumns:[{title:"商品名称",slot:"name",width:400},{title:"商品价格",slot:"price"},{title:"佣金",slot:"commission"},{title:"操作",slot:"action",minWidth:120}],logColumns:[{title:"编号",slot:"sn"},{title:"申请时间",slot:"time"},{title:"提现金额",slot:"price"},{title:"提现状态",slot:"status"}],params:{pageNumber:1,pageSize:20,checked:!0},orderParams:{pageNumber:1,pageSize:20},logParams:{pageNumber:1,pageSize:20,sort:"createTime",order:"desc"},qrcode:"",qrcodeH5:"",qrcodeShow:!1,base64Img:"",base64ImgH5:"",goodsNameCurr:""}},mounted(){this.distribution()},methods:{apply(){this.$refs.form.validate(t=>{t&&(this.applyLoading=!0,Object(r["h"])(this.applyForm).then(t=>{this.applyLoading=!1,t.success&&(this.$Message.success("申请已提交，请等待管理员审核"),this.status=1)}))})},withdraw(){Object(r["v"])({price:this.withdrawPrice}).then(t=>{this.withdrawApplyModal=!1,this.price=0,t.success?(this.$Message.success("申请已提交，请等待审核"),this.distribution(),this.getLog()):this.$Message.error(t.message)})},qrcodeData(t){this.base64Img=t},qrcodeDataH5(t){this.base64ImgH5=t},downloadQrcode(){let t=document.createElement("a"),e=new MouseEvent("click");t.download=this.goodsNameCurr||"photo",t.href=this.base64Img,t.dispatchEvent(e)},downloadQrcodeH5(){let t=document.createElement("a"),e=new MouseEvent("click");t.download=this.goodsNameCurr||"photo",t.href=this.base64ImgH5,t.dispatchEvent(e)},tabPaneChange(t){"goodsChecked"===t?(this.params.checked=!0,this.params.pageNUmber=1,this.getGoodsData()):"goodsUncheck"===t?(this.params.checked=!1,this.getGoodsData()):"log"===t&&(this.logParams.pageNumber=1,this.getLog())},changePage(t){this.params.pageNumber=t,this.getGoodsData()},changePageLog(t){this.logParams.pageNumber=t,this.getLog()},selectGoods(t,e){let s={distributionGoodsId:t,checked:e};Object(r["S"])(s).then(t=>{t.success&&(this.$Message.success("操作成功！"),this.getGoodsData())})},fenxiao(t){this.qrcode=`${this.config.PC_DOMAIN}/goodsDetail?skuId=${t.skuId}&goodsId=${t.goodsId}&distributionId=${this.result.id}`,this.qrcodeH5=`${this.config.WAP_DOMAIN}/pages/product/goods?skuId=${t.skuId}&goodsId=${t.goodsId}&distributionId=${this.result.id}`,this.goodsNameCurr=t.goodsName,this.qrcodeShow=!0},getGoodsData(){Object(r["B"])(this.params).then(t=>{t.success&&(this.goodsData=t.result)})},getLog(){Object(r["w"])(this.logParams).then(t=>{t.success&&(this.logData=t.result)})},repaying(){Object(r["h"])().then(t=>{this.applyLoading=!1,t.success&&this.$Message.success("申诉已提交，请等待管理员审核")})},distribution(){Object(r["x"])().then(t=>{if(t.result){this.result=t.result;let e=t.result.distributionStatus;"PASS"===e?(this.status=2,this.getGoodsData()):this.status="REFUSE"===e?0:"RETREAT"===e?4:"APPEAL"===e?5:1}else t.data.success||22e3!==t.data.code?this.status=0:this.status=3})}}},d=l,u=(s("2d2f"),s("2877")),p=Object(u["a"])(d,a,o,!1,null,"fa8f2018",null);e["default"]=p.exports}}]);