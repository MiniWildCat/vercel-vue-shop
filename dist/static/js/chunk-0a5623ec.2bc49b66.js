(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a5623ec"],{3437:function(e,t,s){"use strict";s("3e98")},3815:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"forget-password",on:{click:function(t){e.$refs.verify.show=!1}}},[t("div",{staticStyle:{height:"50px"}}),t("div",{staticClass:"logo-box"},[t("img",{attrs:{src:e.$store.state.logoImg,width:"150"},on:{click:function(t){return e.$router.push("/")}}}),t("div",[e._v("修改密码")])]),t("div",{staticClass:"login-container"},[t("Form",{directives:[{name:"show",rawName:"v-show",value:0===e.step,expression:"step === 0"}],ref:"formFirst",staticStyle:{width:"300px"},attrs:{model:e.formFirst,rules:e.ruleInline}},[t("FormItem",{attrs:{prop:"mobile"}},[t("i-input",{attrs:{type:"text",clearable:"",placeholder:"手机号"},model:{value:e.formFirst.mobile,callback:function(t){e.$set(e.formFirst,"mobile",t)},expression:"formFirst.mobile"}},[t("Icon",{attrs:{slot:"prepend",type:"md-phone-portrait"},slot:"prepend"})],1)],1),t("FormItem",{attrs:{prop:"code"}},[t("i-input",{attrs:{type:"text",clearable:"",placeholder:"手机验证码"},model:{value:e.formFirst.code,callback:function(t){e.$set(e.formFirst,"code",t)},expression:"formFirst.code"}},[t("Icon",{staticStyle:{"font-weight":"bold"},attrs:{slot:"prepend",type:"ios-text-outline"},slot:"prepend"}),t("Button",{attrs:{slot:"append"},on:{click:e.sendCode},slot:"append"},[e._v(e._s(e.codeMsg))])],1)],1),t("FormItem",[t("Button",{attrs:{long:"",type:e.verifyStatus?"success":"default"},on:{click:e.verifyBtnClick}},[e._v(e._s(e.verifyStatus?"验证通过":"点击完成安全验证"))])],1),t("FormItem",[t("Button",{attrs:{type:"error",loading:e.loading,long:""},on:{click:e.next}},[e._v("下一步")])],1)],1),t("Form",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],ref:"form",staticStyle:{width:"300px"},attrs:{model:e.form,rules:e.ruleInline}},[t("FormItem",{attrs:{prop:"password"}},[t("i-input",{attrs:{type:"password",clearable:"",placeholder:"请输入至少六位密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[t("Icon",{attrs:{slot:"prepend",type:"md-lock"},slot:"prepend"})],1)],1),t("FormItem",{attrs:{prop:"password"}},[t("i-input",{attrs:{type:"password",clearable:"",placeholder:"请再次输入密码"},model:{value:e.form.oncePasd,callback:function(t){e.$set(e.form,"oncePasd",t)},expression:"form.oncePasd"}},[t("Icon",{attrs:{slot:"prepend",type:"md-lock"},slot:"prepend"})],1)],1),t("FormItem",[t("Button",{attrs:{type:"error",size:"large",loading:e.loading1,long:""},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1),t("Verify",{ref:"verify",staticClass:"verify-con",attrs:{verifyType:e.verifyType},on:{change:e.verifyChange}}),t("div",{staticClass:"login-btn"},[t("a",{on:{click:function(t){return e.$router.push("login")}}},[e._v("前往登录")])])],1),t("div",{staticClass:"foot"},[t("Row",{staticClass:"help",attrs:{type:"flex",justify:"space-around"}},[t("a",{staticClass:"item",attrs:{href:"https://pickmall.cn/",target:"_blank"}},[e._v("帮助")]),t("a",{staticClass:"item",attrs:{href:"https://pickmall.cn/",target:"_blank"}},[e._v("隐私")]),t("a",{staticClass:"item",attrs:{href:"https://pickmall.cn/",target:"_blank"}},[e._v("条款")])]),t("Row",{staticClass:"copyright",attrs:{type:"flex",justify:"center"}},[e._v(" Copyright © "+e._s(e.year)+" - Present "),t("a",{staticStyle:{margin:"0 5px"},attrs:{href:"https://pickmall.cn/",target:"_blank"}},[e._v(e._s(e.config.title))]),e._v(" 版权所有 ")])],1)])},i=[],o=s("7dfd"),a=s("be72"),n=s("7ded"),l=s("2934"),c=s("6402"),p={name:"ForgetPassword",components:{Verify:c["a"]},data(){return{config:s("f121"),loading:!1,loading1:!1,formFirst:{mobile:"",code:""},form:{password:"",oncePasd:""},year:(new Date).getFullYear(),step:0,ruleInline:{mobile:[{required:!0,message:"请输入手机号码"},{pattern:o["mobile"],trigger:"blur",message:"请输入正确的手机号"}],code:[{required:!0,message:"请输入手机验证码"}],password:[{required:!0,message:"密码不能为空"},{pattern:o["password"],message:"密码不能少于6位"}]},verifyStatus:!1,verifyType:"FIND_USER",codeMsg:"发送验证码",interval:"",time:60}},methods:{next(){this.$refs.formFirst.validate(e=>{if(e){this.loading=!0;let e=JSON.parse(JSON.stringify(this.formFirst));n["i"](e).then(e=>{this.loading=!1,e.success?this.step=1:this.$Message.warning(e.message)}).catch(()=>{this.loading=!1})}})},handleSubmit(){this.$refs.form.validate(e=>{if(e){let e=JSON.parse(JSON.stringify(this.form));if(e.password!==e.oncePasd)return void this.$Message.warning("两次输入密码不一致");e.mobile=this.formFirst.mobile,e.password=Object(a["md5"])(e.password),delete e.oncePasd,this.loading1=!0,n["f"](e).then(e=>{this.loading1=!1,console.log(e),e.success&&(this.$Message.success("修改密码成功"),this.$router.push("login"))}).catch(()=>{this.loading=!1})}})},sendCode(){if(60===this.time){if(""===this.formFirst.mobile)return void this.$Message.warning("请先填写手机号");if(!this.verifyStatus)return void this.$Message.warning("请先完成安全验证");let e={mobile:this.formFirst.mobile,verificationEnums:"FIND_USER"};Object(l["g"])(e).then(e=>{if(e.success){this.$Message.success("验证码发送成功");let e=this;this.interval=setInterval(()=>{e.time--,0===e.time?(e.time=60,e.codeMsg="重新发送",e.verifyStatus=!1,clearInterval(e.interval)):e.codeMsg=e.time},1e3)}else this.$Message.warning(e.message)})}},verifyChange(e){e.status&&(this.$refs.verify.show=!1,this.verifyStatus=!0)},verifyBtnClick(){this.verifyStatus||this.$refs.verify.init()}},mounted(){document.querySelector(".forget-password").style.height=window.innerHeight+"px",this.$refs.formFirst.resetFields()},watch:{}},d=p,m=(s("3437"),s("2877")),f=Object(m["a"])(d,r,i,!1,null,"58a7f199",null);t["default"]=f.exports},"3e98":function(e,t,s){}}]);