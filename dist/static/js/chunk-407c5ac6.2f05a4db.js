(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-407c5ac6"],{"04fd":function(t,s,e){"use strict";e("7ca1")},2174:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"coupon-center"},[s("BaseHeader"),s("div",{staticClass:"content"},[s("div",[s("div",{staticClass:"coupon-title"},[s("router-link",{attrs:{to:"/"}},[s("img",{attrs:{src:e("9d64"),width:"120",alt:""}})]),s("p",[t._v("领券中心")]),s("Input",{staticStyle:{width:"400px"},attrs:{search:"","enter-button":"搜索",placeholder:"搜索优惠券"},on:{"on-search":t.search}})],1),s("div",{staticClass:"fontsize_18 recommend"},[t._v("推荐好券")]),0===t.list.length?s("empty"):s("ul",{staticClass:"coupon-list"},t._l(t.list,(function(e,a){return s("li",{key:a,staticClass:"coupon-item"},[s("div",{staticClass:"c-left"},[s("div",["PRICE"===e.couponType?s("span",{staticClass:"fontsize_12 global_color"},[t._v("￥"),s("span",{staticClass:"price"},[t._v(t._s(t._f("unitPrice")(e.price)))])]):t._e(),"DISCOUNT"===e.couponType?s("span",{staticClass:"fontsize_12 global_color"},[s("span",{staticClass:"price"},[t._v(t._s(e.couponDiscount))]),t._v("折")]):t._e(),s("span",{staticClass:"describe"},[t._v("满"+t._s(e.consumeThreshold)+"元可用")])]),s("p",[t._v("使用范围："+t._s(t.useScope(e.scopeType,e.storeName)))]),s("p",[t._v("有效期："+t._s(e.endTime))])]),s("b"),s("a",{staticClass:"c-right",on:{click:function(s){return t.receive(e)}}},[t._v("立即领取")]),s("i",{staticClass:"circle-top"}),s("i",{staticClass:"circle-bottom"})])})),0),s("Page",{staticClass:"pageration",attrs:{total:t.total,"page-size":t.params.pageSize,"show-total":"","show-sizer":""},on:{"on-change":t.changePageNum,"on-page-size-change":t.changePageSize}})],1)]),s("BaseFooter")],1)},i=[],c=e("8194"),o={data(){return{list:[],total:0,params:{getType:"FREE",pageNumber:1,pageSize:20}}},methods:{search(t){this.params.couponName=t,this.params.pageNumber=1,this.getList()},getList(){this.$Spin.show(),Object(c["t"])(this.params).then(t=>{this.$Spin.hide(),this.loading=!1,t.success&&(this.list=t.result.records,this.total=t.result.total)}).catch(()=>{this.$Spin.hide()})},changePageNum(t){this.params.pageNumber=t,this.getList()},changePageSize(t){this.params.pageNumber=1,this.params.pageSize=t,this.getList()},receive(t){Object(c["Q"])(t.id).then(s=>{s.success&&(console.log(t),this.$Modal.confirm({title:"领取优惠券",content:"<p>优惠券领取成功，可到我的优惠券页面查看</p>",okText:"我的优惠券",cancelText:"立即使用",closable:!0,onOk:()=>{this.$router.push("/home/Coupons")},onCancel:()=>{this.$router.push({path:"/goodsList",query:{promotionsId:t.id,promotionType:"COUPON"}})}}))})},useScope(t,s){let e="平台",a="全部商品";switch("platform"!==s&&(e=s),t){case"ALL":a="全部商品";break;case"PORTION_GOODS":a="部分商品";break;case"PORTION_GOODS_CATEGORY":a="部分分类商品";break}return`${e}${a}可用`}},mounted(){this.getList()}},n=o,r=(e("04fd"),e("2877")),p=Object(r["a"])(n,a,i,!1,null,"9a2adda6",null);s["default"]=p.exports},"7ca1":function(t,s,e){},"9d64":function(t,s,e){t.exports=e.p+"static/img/logo.7c17c658.png"}}]);