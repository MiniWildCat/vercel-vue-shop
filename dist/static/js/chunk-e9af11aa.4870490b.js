(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9af11aa"],{"77a6":function(t,e,s){"use strict";s("f270")},"78c0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.homePage?e("card",{attrs:{_Title:"近期收藏",_Size:16,_Tabs:t.favoriteWay,_More:"全部收藏",_Src:"/home/Favorites"},on:{_Change:t.change}}):e("card",{attrs:{_Title:"近期收藏",_Tabs:t.favoriteWay,_Size:16},on:{_Change:t.change}}),t.list.length?e("div",[t._l(t.list,(function(s,a){return e("div",{key:a},[e("div",{key:s.skuId,staticClass:"goodsItem"},["GOODS"===t.params.type?e("div",{staticClass:"goodsImg hover-pointer"},[e("img",{attrs:{src:s.image}})]):e("div",{staticClass:"goodsImg hover-pointer"},[e("img",{attrs:{src:s.storeLogo}})]),"GOODS"===t.params.type?e("div",{staticClass:"goodsTitle hover-color",on:{click:function(e){return t.buynow(s.skuId,s.goodsId,s.id)}}},[t._v(" "+t._s(s.goodsName)+" ")]):e("div",{staticClass:"goodsTitle hover-pointer",on:{click:function(e){return t.buynow(s.skuId,s.goodsId,s.id)}}},[t._v(" "+t._s(s.storeName)+" "),s.selfOperated?e("Tag",{staticClass:"operated",attrs:{color:"error"}},[t._v("商家自营")]):t._e()],1),e("div",{staticClass:"goodsPrice"},["GOODS"===t.params.type?e("span",[t._v(t._s(t._f("unitPrice")(s.price,"￥")))]):t._e()]),e("div",{staticClass:"goodsBuy"},["GOODS"===t.params.type?e("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.buynow(s.skuId,s.goodsId)}}},[t._v("立即购买")]):e("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.goShop(s.id)}}},[t._v("店铺购买")]),"GOODS"===t.params.type?e("Button",{attrs:{size:"small"},on:{click:function(e){return t.cancel(s.skuId)}}},[t._v("取消收藏")]):t._e(),"STORE"===t.params.type?e("Button",{attrs:{size:"small"},on:{click:function(e){return t.cancelStore(s.id)}}},[t._v("取消收藏")]):t._e()],1)])])})),t.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],2):e("empty")],1)},i=[],o=s("8194"),r={name:"Favorites",props:{homePage:{type:Boolean,default:!1}},data(){return{favoriteWay:["收藏商品","收藏店铺"],list:[],total:0,params:{pageNumber:1,pageSize:100,type:this.$route.query.type||"GOODS"},spinShow:!1}},methods:{getList(){this.spinShow=!0,Object(o["q"])(this.params).then(t=>{this.spinShow=!1,t.success&&(this.list=t.result.records)})},getStoreList(){this.spinShow=!0,Object(o["T"])(this.params).then(t=>{this.spinShow=!1,t.success&&(this.list=t.result.records)})},change(t){0===t&&(this.params.type="GOODS",this.getList()),1===t&&(this.params.type="STORE",this.getStoreList())},cancel(t){let e="GOODS"===this.params.type?"商品":"店铺";this.$Modal.confirm({title:"Title",content:`<p>确定取消收藏该${e}吗？</p>`,onOk:()=>{Object(o["k"])(this.params.type,t).then(t=>{t.success&&this.getList()})}})},cancelStore(t){let e="GOODS"===this.params.type?"商品":"店铺";this.$Modal.confirm({title:"Title",content:`<p>确定取消收藏该${e}吗？</p>`,onOk:()=>{Object(o["l"])(this.params.type,t).then(t=>{t.success&&this.getStoreList()})}})},buynow(t,e,s){let a;console.log(this.params.type),a="STORE"===this.params.type?this.$router.resolve({path:"/Merchant",query:{id:s}}):this.$router.resolve({path:"/goodsDetail",query:{skuId:t,goodsId:e}}),window.open(a.href,"_blank")},goShop(t){let e=this.$router.resolve({path:"/merchant",query:{id:t}});window.open(e.href,"_blank")}},mounted(){this.homePage&&(this.params.pageSize=5),this.getList()}},n=r,c=(s("77a6"),s("2877")),p=Object(c["a"])(n,a,i,!1,null,"56ceca7a",null);e["default"]=p.exports},f270:function(t,e,s){}}]);