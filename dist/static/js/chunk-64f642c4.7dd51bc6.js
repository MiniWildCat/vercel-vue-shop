(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64f642c4"],{"33c0":function(e,t,s){},"7ded":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"c",(function(){return a})),s.d(t,"h",(function(){return n})),s.d(t,"a",(function(){return i})),s.d(t,"j",(function(){return c})),s.d(t,"d",(function(){return d})),s.d(t,"i",(function(){return u})),s.d(t,"f",(function(){return l})),s.d(t,"b",(function(){return h})),s.d(t,"g",(function(){return p}));var o=s("ff66");function r(e){return Object(o["d"])({url:"/buyer/passport/member/register",method:o["a"].POST,needToken:!1,data:e})}function a(e){return Object(o["d"])({url:"/buyer/passport/member/userLogin",method:o["a"].POST,needToken:!1,data:e,headers:{clientType:"PC"}})}function n(e){return Object(o["d"])({url:"/buyer/passport/member/smsLogin",method:o["a"].POST,needToken:!1,data:e,headers:{clientType:"PC"}})}function i(e){return Object(o["d"])({url:"/buyer/passport/member",method:o["a"].GET,needToken:!0,params:e})}function c(e){window.open(`${o["b"]}/buyer/passport/connect/connect/login/web/${e}`,"blank")}function d(e){return Object(o["d"])({url:"/buyer/passport/connect/connect/result?state="+e,method:o["a"].GET,needToken:!1})}function u(e){return Object(o["d"])({url:"/buyer/passport/member/resetByMobile",method:o["a"].POST,needToken:!1,params:e})}function l(e){return Object(o["d"])({url:"/buyer/passport/member/resetPassword",method:o["a"].POST,needToken:!1,params:e})}function h(e){return Object(o["d"])({url:"/buyer/passport/member/pc_session",method:o["a"].POST,needToken:!1,params:e})}function p(e,t){return Object(o["d"])({url:"/buyer/passport/member/session_login/"+e,method:o["a"].POST,needToken:!1,params:t})}},"84a9":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return a})),s.d(t,"e",(function(){return n})),s.d(t,"g",(function(){return i})),s.d(t,"f",(function(){return c})),s.d(t,"a",(function(){return d})),s.d(t,"d",(function(){return u})),s.d(t,"h",(function(){return l}));var o=s("ff66");function r(e){return Object(o["d"])({url:"/buyer/store/store/apply/first",needToken:!0,method:o["a"].PUT,params:e})}function a(e){return Object(o["d"])({url:"/buyer/store/store/apply/second",needToken:!0,method:o["a"].PUT,params:e})}function n(e){return Object(o["d"])({url:"/buyer/store/store/apply/third",needToken:!0,method:o["a"].PUT,params:e})}function i(e){return Object(o["d"])({url:"/buyer/store/store/get/detail/"+e,needToken:!0,method:o["a"].GET})}function c(e){return Object(o["d"])({url:"/buyer/store/store/label/get/"+e,needToken:!0,method:o["a"].GET})}function d(){return Object(o["d"])({url:"/buyer/other/article/type/STORE_REGISTER",needToken:!0,method:o["a"].GET})}function u(){return Object(o["d"])({url:"/buyer/store/store/apply",needToken:!0,method:o["a"].GET})}function l(e,t){return Object(o["d"])({url:"/buyer/store/address/page/"+e,method:o["a"].GET,params:t})}},"9f83":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"merchant"},[t("BaseHeader"),t("Search",{attrs:{storeId:e.storeMsg.storeId},on:{search:e.search}}),t("div",{staticClass:"shop-logo"},[t("div",[t("p",[e._v(e._s(e.storeMsg.storeName||"店铺"))]),t("p",{staticClass:"ellipsis",attrs:{alt:e.storeMsg.storeDesc},domProps:{innerHTML:e._s(e.storeMsg.storeDesc)}})]),t("div",[t("span",{staticClass:"hover-pointer",on:{click:e.collect}},[t("Icon",{attrs:{color:e.storeCollected?"#ed3f14":"#fff",type:"ios-heart"}}),e._v(e._s(e.storeCollected?"已收藏店铺":"收藏店铺"))],1),t("span",{staticClass:"hover-pointer ml_10",staticStyle:{width:"80px"},on:{click:function(t){return e.IMService(e.storeMsg.storeId,null,null)}}},[t("Icon",{attrs:{custom:"icomoon icon-customer-service"}}),e._v("联系客服")],1)])]),t("div",{staticClass:"store-category"},[t("ul",{staticClass:"cate-list"},[t("li",{staticClass:"cate-item",on:{click:function(t){return e.searchByCate({id:"",labelName:"店铺推荐"})}}},[e._v(" 首页 ")]),e._l(e.cateList,(function(s,o){return t("li",{key:o,staticClass:"cate-item"},[s.children.length?t("Dropdown",[t("div",{on:{click:function(t){return t.target!==t.currentTarget?null:e.searchByCate(s)}}},[e._v(" "+e._s(s.labelName)+" "),t("Icon",{attrs:{type:"ios-arrow-down"}})],1),t("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(s.children,(function(s){return t("DropdownItem",{key:s.id,attrs:{name:s.id},nativeOn:{click:function(t){return e.searchByCate(s)}}},[e._v(e._s(s.labelName)+" ")])})),1)],1):t("span",{on:{click:function(t){return t.target!==t.currentTarget?null:e.searchByCate(s)}}},[e._v(e._s(s.labelName))])],1)}))],2)]),e.storeMsg.pageShow&&"1"===e.storeMsg.pageShow?t("div",[t("model-form",{ref:"modelForm",attrs:{data:e.modelForm}})],1):t("div",[t("div",{staticClass:"promotion-decorate"},[e._v(e._s(e.cateName))]),t("div",{staticClass:"goods-list"},[0===e.goodsList.length?t("empty"):e._l(e.goodsList,(function(s,o){return t("div",{key:o,staticClass:"goods-show-info",on:{click:function(t){return e.goGoodsDetail(s.id,s.goodsId)}}},[t("div",{staticClass:"goods-show-img"},[t("img",{attrs:{src:s.small,height:"220",width:"220",alt:""}})]),t("div",{staticClass:"goods-show-price"},[t("span",[t("span",{staticClass:"seckill-price text-danger"},[e._v(e._s(e._f("unitPrice")(s.price,"￥")))])])]),t("div",{staticClass:"goods-show-detail"},[t("span",[e._v(e._s(s.goodsName))])]),t("div",{staticClass:"goods-show-num"},[e._v(" 已有"),t("span",[e._v(e._s(s.commentNum||0))]),e._v("人评价 ")])])}))],2),t("div",{staticClass:"goods-page"},[t("Page",{attrs:{"page-size":e.params.pageSize,total:e.total,"show-sizer":""},on:{"on-change":e.changePageNum,"on-page-size-change":e.changePageSize}})],1)]),t("BaseFooter")],1)},r=[],a=s("84a9"),n=s("8194"),i=s("c40e"),c=s("c106"),d=s("4540"),u=s("73ae"),l=s("e487"),h=s("365c"),p=s("def3"),g={name:"Merchant",components:{Search:c["a"],ModelForm:d["a"],HoverSearch:u["a"]},mixins:[p["a"]],data(){return{modelForm:{list:[]},topAdvert:{},showNav:!1,topSearchShow:!1,carouselLarge:!1,carouselOpacity:!1,enablePageData:!1,basePageData:!1,storeMsg:{},cateList:[],goodsList:[],total:0,params:{pageNumber:1,pageSize:20,keyword:"",storeId:this.$route.query.id,storeCatId:""},cateName:"店铺推荐",storeCollected:!1}},created(){this.getStoreMsg()},methods:{getIndexData(){Object(h["b"])({clientType:"PC",num:this.$route.query.id,pageType:"STORE"}).then(e=>{if(e.success){let t=JSON.parse(e.result.pageData);for(const e of t.list){let t=e.type;"carousel2"===t?this.carouselLarge=!0:"carousel1"===t&&(this.carouselLarge=!0,this.carouselOpacity=!0)}this.modelForm=t,l["a"].setItem("navList",t.list[1]),this.showNav=!0,this.topAdvert=t.list[0]}})},getStoreMsg(){Object(a["g"])(this.$route.query.id).then(e=>{if(e.success){this.storeMsg=e.result,console.log(this.storeMsg),this.storeMsg.pageShow&&"1"===this.storeMsg.pageShow?this.getIndexData():(this.getGoodsList(),this.getCateList());let t=this;window.onscroll=function(){let e=document.documentElement.scrollTop||document.body.scrollTop;t.topSearchShow=e>300}}})},getCateList(){Object(a["f"])(this.$route.query.id).then(e=>{e.success&&(this.cateList=e.result,console.log(this.cateList,"cateList"))})},getGoodsList(){Object(i["c"])(this.params).then(e=>{e.success&&(this.goodsList=e.result.records,this.total=e.result.total)}).catch(()=>{})},goGoodsDetail(e,t){let s=this.$router.resolve({path:"/goodsDetail",query:{skuId:e,goodsId:t}});window.open(s.href,"_blank")},search(e){console.log(e),this.params.keyword=e,this.getGoodsList()},searchByCate(e){this.params.storeCatId=e.id,this.cateName=e.labelName,this.getGoodsList()},changePageNum(e){this.params.pageNumber=e,this.getGoodsList()},changePageSize(e){this.params.pageNumber=1,this.params.pageSize=e,this.getGoodsList()},async collect(){if(this.storeCollected){let e=await Object(n["l"])("STORE",this.storeMsg.storeId);e.success&&(this.$Message.success("已取消收藏"),this.storeCollected=!1)}else{let e=await Object(n["r"])("STORE",this.storeMsg.storeId);200===e.code&&(this.storeCollected=!0,this.$Message.success("收藏店铺成功,可以前往个人中心我的收藏查看"))}}}},m=g,f=(s("a949"),s("2877")),b=Object(f["a"])(m,o,r,!1,null,"2f4d27aa",null);t["default"]=b.exports},a949:function(e,t,s){"use strict";s("33c0")},def3:function(e,t,s){"use strict";var o=function(){var e=this,t=e._self._c;return t("div")},r=[],a=s("2934"),n=s("e487"),i=s("7ded"),c={data(){return{Storage:n["a"],IMLink:""}},methods:{async IMService(e,t,s){let o=n["a"].getItem("accessToken");await this.getIMDetailMethods();const r=await Object(i["a"])();r.success?t&&s?window.open(this.IMLink+"?token="+o+"&id="+e||this.storeMsg.storeId+"&goodsId="+t+"&skuId="+s):window.open(this.IMLink+"?token="+o+"&id="+e||this.storeMsg.storeId):this.$Message.error("请登录后再联系客服")},async getIMDetailMethods(){let e=await Object(a["e"])();e.success&&(this.IMLink=e.result)}}},d=c,u=s("2877"),l=Object(u["a"])(d,o,r,!1,null,"588e26a1",null);t["a"]=l.exports}}]);