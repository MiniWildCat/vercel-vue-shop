(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce4b95ee","chunk-e407c66e","chunk-e9af11aa"],{"30c4":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.homePage?e("card",{attrs:{_Title:"我的订单",_Size:16,_Tabs:t.changeWay,_More:"全部订单",_Src:"/home/MyOrder"},on:{_Change:t.change}}):e("card",{attrs:{_Title:"我的订单",_Size:16,_Tabs:t.changeWay},on:{_Change:t.change}}),t.homePage?t._e():e("div",{staticClass:"mb_24 box"},[e("div",{staticClass:"global_float_right"},[e("Input",{staticClass:"width_300",attrs:{search:"","enter-button":"",placeholder:"请输入订单号搜索"},on:{"on-search":t.getList},model:{value:t.params.keywords,callback:function(e){t.$set(t.params,"keywords",e)},expression:"params.keywords"}})],1)]),0===t.orderList.length?e("empty"):e("div",{staticClass:"order-content"},[t._l(t.orderList,(function(s,a){return e("div",{key:a,staticClass:"order-list"},[e("div",{staticClass:"order-header"},[e("div",[e("div",[t._v(t._s(t.filterOrderStatus(s.orderStatus)))]),e("div",[t._v(" 订单号："+t._s(s.sn)+"      "+t._s(s.createTime)+" ")])]),e("div",["COMPLETED"===s.orderStatus?e("Button",{staticClass:"del-btn mr_10 fontsize_16",staticStyle:{"margin-top":"-5px"},attrs:{type:"text",icon:"ios-trash-outline",size:"small"},on:{click:function(e){return t.delOrder(s.sn)}}}):t._e(),e("span",[t._v(t._s(t._f("unitPrice")(s.flowPrice,"￥")))])],1)]),e("div",{staticClass:"order-body"},[e("div",{staticClass:"goods-list"},t._l(s.orderItems,(function(a,r){return e("div",{key:r},[e("img",{staticClass:"hover-color",attrs:{src:a.image,alt:""},on:{click:function(e){return t.goodsDetail(a.skuId,a.goodsId)}}}),e("div",[e("div",{staticClass:"hover-color",on:{click:function(e){return t.goodsDetail(a.skuId,a.goodsId)}}},[t._v(t._s(a.name))]),e("div",{staticClass:"mt_10"},[e("span",{staticClass:"global_color"},[t._v(t._s(t._f("unitPrice")(a.goodsPrice,"￥"))+" ")]),t._v("x "+t._s(a.num)+" "),e("span",{staticStyle:{"margin-left":"10px",color:"#ff9900"}},[t._v(t._s(t.refundPriceList(a.isRefund)))])]),"UNFINISHED"==a.commentStatus?e("Button",{staticClass:"fontsize_12",staticStyle:{position:"relative",top:"-22px",left:"190px","margin-right":"10px"},attrs:{size:"small",type:"success"},on:{click:function(e){return t.comment(s.sn,r)}}},[t._v("评价")]):t._e(),"NO_APPLY"==a.complainStatus?e("Button",{staticClass:"fontsize_12",staticStyle:{position:"relative",top:"-22px",left:"190px"},attrs:{type:"warning",size:"small"},on:{click:function(e){return t.complain(s.sn,r)}}},[t._v("投诉")]):t._e()],1)])})),0),e("div",[e("span",{on:{click:function(e){return t.shopPage(s.storeId)}}},[t._v(t._s(s.storeName))])]),e("div",[e("Button",{attrs:{type:"info",size:"small"},on:{click:function(e){return t.orderDetail(s.sn)}}},[t._v("订单详情")]),s.allowOperationVO.cancel?e("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.handleCancelOrder(s.sn)}}},[t._v("取消订单")]):t._e(),s.allowOperationVO.pay?e("Button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.goPay(s.sn)}}},[t._v("去支付")]):t._e(),s.allowOperationVO.rog?e("Button",{attrs:{size:"small",type:"warning"},on:{click:function(e){return t.received(s.sn)}}},[t._v("确认收货")]):t._e(),s.groupAfterSaleStatus&&(s.groupAfterSaleStatus.includes("NOT_APPLIED")||s.groupAfterSaleStatus.includes("PART_AFTER_SALE"))?e("Button",{attrs:{size:"small"},on:{click:function(e){return t.applyAfterSale(s.orderItems)}}},[t._v("申请售后")]):t._e()],1)])])})),t.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],2),t.homePage?t._e():e("div",{staticClass:"page-size"},[e("Page",{attrs:{total:t.total,"page-size":t.params.pageSize,"show-total":"","show-sizer":""},on:{"on-change":t.changePageNum,"on-page-size-change":t.changePageSize}})],1),e("Modal",{attrs:{title:"请选择申请售后的商品"},model:{value:t.afterSaleModal,callback:function(e){t.afterSaleModal=e},expression:"afterSaleModal"}},[e("div",[e("Table",{attrs:{border:"",columns:t.afterSaleColumns,data:t.afterSaleArr},on:{"on-row-click":t.afterSaleSelect}})],1),e("div",{attrs:{slot:"footer"},slot:"footer"})]),e("Modal",{attrs:{title:"请选择取消订单原因"},on:{"on-ok":t.sureCancel,"on-cancel":function(e){t.cancelAvail=!1}},model:{value:t.cancelAvail,callback:function(e){t.cancelAvail=e},expression:"cancelAvail"}},[e("RadioGroup",{attrs:{vertical:"",type:"button","button-style":"solid"},model:{value:t.cancelParams.reason,callback:function(e){t.$set(t.cancelParams,"reason",e)},expression:"cancelParams.reason"}},t._l(t.cancelReason,(function(s){return e("Radio",{key:s.id,attrs:{label:s.reason}},[t._v(" "+t._s(s.reason)+" ")])})),1)],1)],1)},r=[],i=s("f8b7"),n=s("8194"),o=s("9243"),c={name:"MyOrder",props:{homePage:{type:Boolean,default:!1}},data(){return{orderList:[],params:{pageNumber:1,pageSize:10,keywords:"",tag:"ALL"},cancelParams:{orderSn:"",reason:""},orderStatusList:o["b"],changeWay:["全部订单","待付款","待收货","已完成"],total:0,spinShow:!1,afterSaleModal:!1,afterSaleColumns:[{title:"商品名称",key:"name"},{title:"价格",key:"goodsPrice"}],afterSaleArr:[],cancelAvail:!1,cancelReason:[]}},mounted(){this.homePage&&(this.params.pageSize=5),this.getList()},methods:{refundPriceList(t){switch(t){case"ALL_REFUND":return"全部退款";case"PART_REFUND":return"部分退款";case"NO_REFUND":return"";case"REFUNDING":return"退款中";default:return""}},goodsDetail(t,e){let s=this.$router.resolve({path:"/goodsDetail",query:{skuId:t,goodsId:e}});window.open(s.href,"_blank")},change(t){switch(t){case 0:this.params.tag="ALL";break;case 1:this.params.tag="WAIT_PAY";break;case 2:this.params.tag="WAIT_ROG";break;case 3:this.params.tag="COMPLETE";break}this.getList()},shopPage(t){let e=this.$router.resolve({path:"/Merchant",query:{id:t}});window.open(e.href,"_blank")},orderDetail(t){this.$router.push({name:"OrderDetail",query:{sn:t}})},received(t){Object(i["k"])(t).then(t=>{t.success&&(this.$Message.success("确认收货成功"),this.getList())})},goPay(t){this.$router.push({path:"/payment",query:{orderType:"ORDER",sn:t}})},applyAfterSale(t){let e=[];t.forEach(t=>{"NOT_APPLIED"!==t.afterSaleStatus&&"PART_AFTER_SALE"!==t.afterSaleStatus||e.push(t)}),1===e.length?this.$router.push({name:"ApplyAfterSale",query:{sn:e[0].sn}}):(this.afterSaleArr=e,this.afterSaleModal=!0)},afterSaleSelect(t){this.$router.push({name:"ApplyAfterSale",query:{sn:t.sn}})},comment(t,e){this.$router.push({path:"/home/addEval",query:{sn:t,index:e}})},complain(t,e){this.$router.push({name:"Complain",query:{sn:t,index:e}})},delOrder(t){this.$Modal.confirm({title:"删除订单",content:"<p>确认删除当前订单吗？</p>",onOk:()=>{Object(i["d"])(t).then(t=>{t.success&&(this.$Message.success("删除成功"),this.getList())})},onCancel:()=>{}})},getList(){this.spinShow=!0;let t=JSON.parse(JSON.stringify(this.params));"ALL"===t.orderStatus&&delete t.orderStatus,Object(i["g"])(t).then(t=>{this.spinShow=!1,t.success&&(this.orderList=t.result.records,this.total=t.result.total)})},changePageNum(t){this.params.pageNumber=t,this.getList()},changePageSize(t){this.params.pageNumber=1,this.params.pageSize=t,this.getList()},handleCancelOrder(t){this.cancelParams.orderSn=t,Object(n["f"])("CANCEL").then(t=>{t.success&&(this.cancelReason=t.result,this.cancelAvail=!0,this.cancelParams.reason=this.cancelReason[0].reason)})},sureCancel(){Object(i["b"])(this.cancelParams).then(t=>{t.success&&(this.$Message.success("取消订单成功"),this.getList(),this.cancelAvail=!1)})},filterOrderStatus(t){const e=this.orderStatusList.filter(e=>e.status===t);return e&&e[0]?e[0].name:t}}},l=c,u=(s("9501"),s("2877")),d=Object(u["a"])(l,a,r,!1,null,"55609cee",null);e["default"]=d.exports},5979:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"userBox"},[e("div",{staticClass:"box"},[e("myOrderPage",{attrs:{homePage:!0}})],1),e("div",{staticClass:"box"},[e("myFavorites",{attrs:{homePage:!0}})],1),e("div",{staticClass:"box"})])])},r=[],i=s("30c4"),n=s("78c0"),o={name:"main",components:{myOrderPage:i["default"],myFavorites:n["default"]}},c=o,l=(s("ec64"),s("2877")),u=Object(l["a"])(c,a,r,!1,null,"39703206",null);e["default"]=u.exports},"665e":function(t,e,s){},"77a6":function(t,e,s){"use strict";s("f270")},"78c0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[t.homePage?e("card",{attrs:{_Title:"近期收藏",_Size:16,_Tabs:t.favoriteWay,_More:"全部收藏",_Src:"/home/Favorites"},on:{_Change:t.change}}):e("card",{attrs:{_Title:"近期收藏",_Tabs:t.favoriteWay,_Size:16},on:{_Change:t.change}}),t.list.length?e("div",[t._l(t.list,(function(s,a){return e("div",{key:a},[e("div",{key:s.skuId,staticClass:"goodsItem"},["GOODS"===t.params.type?e("div",{staticClass:"goodsImg hover-pointer"},[e("img",{attrs:{src:s.image}})]):e("div",{staticClass:"goodsImg hover-pointer"},[e("img",{attrs:{src:s.storeLogo}})]),"GOODS"===t.params.type?e("div",{staticClass:"goodsTitle hover-color",on:{click:function(e){return t.buynow(s.skuId,s.goodsId,s.id)}}},[t._v(" "+t._s(s.goodsName)+" ")]):e("div",{staticClass:"goodsTitle hover-pointer",on:{click:function(e){return t.buynow(s.skuId,s.goodsId,s.id)}}},[t._v(" "+t._s(s.storeName)+" "),s.selfOperated?e("Tag",{staticClass:"operated",attrs:{color:"error"}},[t._v("商家自营")]):t._e()],1),e("div",{staticClass:"goodsPrice"},["GOODS"===t.params.type?e("span",[t._v(t._s(t._f("unitPrice")(s.price,"￥")))]):t._e()]),e("div",{staticClass:"goodsBuy"},["GOODS"===t.params.type?e("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.buynow(s.skuId,s.goodsId)}}},[t._v("立即购买")]):e("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.goShop(s.id)}}},[t._v("店铺购买")]),"GOODS"===t.params.type?e("Button",{attrs:{size:"small"},on:{click:function(e){return t.cancel(s.skuId)}}},[t._v("取消收藏")]):t._e(),"STORE"===t.params.type?e("Button",{attrs:{size:"small"},on:{click:function(e){return t.cancelStore(s.id)}}},[t._v("取消收藏")]):t._e()],1)])])})),t.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],2):e("empty")],1)},r=[],i=s("8194"),n={name:"Favorites",props:{homePage:{type:Boolean,default:!1}},data(){return{favoriteWay:["收藏商品","收藏店铺"],list:[],total:0,params:{pageNumber:1,pageSize:100,type:this.$route.query.type||"GOODS"},spinShow:!1}},methods:{getList(){this.spinShow=!0,Object(i["q"])(this.params).then(t=>{this.spinShow=!1,t.success&&(this.list=t.result.records)})},getStoreList(){this.spinShow=!0,Object(i["T"])(this.params).then(t=>{this.spinShow=!1,t.success&&(this.list=t.result.records)})},change(t){0===t&&(this.params.type="GOODS",this.getList()),1===t&&(this.params.type="STORE",this.getStoreList())},cancel(t){let e="GOODS"===this.params.type?"商品":"店铺";this.$Modal.confirm({title:"Title",content:`<p>确定取消收藏该${e}吗？</p>`,onOk:()=>{Object(i["k"])(this.params.type,t).then(t=>{t.success&&this.getList()})}})},cancelStore(t){let e="GOODS"===this.params.type?"商品":"店铺";this.$Modal.confirm({title:"Title",content:`<p>确定取消收藏该${e}吗？</p>`,onOk:()=>{Object(i["l"])(this.params.type,t).then(t=>{t.success&&this.getStoreList()})}})},buynow(t,e,s){let a;console.log(this.params.type),a="STORE"===this.params.type?this.$router.resolve({path:"/Merchant",query:{id:s}}):this.$router.resolve({path:"/goodsDetail",query:{skuId:t,goodsId:e}}),window.open(a.href,"_blank")},goShop(t){let e=this.$router.resolve({path:"/merchant",query:{id:t}});window.open(e.href,"_blank")}},mounted(){this.homePage&&(this.params.pageSize=5),this.getList()}},o=n,c=(s("77a6"),s("2877")),l=Object(c["a"])(o,a,r,!1,null,"56ceca7a",null);e["default"]=l.exports},9243:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return r}));const a=[{name:"全部",status:"ALL"},{name:"未付款",status:"UNPAID"},{name:"已付款",status:"PAID"},{name:"待发货",status:"UNDELIVERED"},{name:"已发货",status:"DELIVERED"},{name:"已完成",status:"COMPLETED"},{name:"待核验",status:"TAKE"},{name:"已关闭",status:"CANCELLED"},{name:"待提货",status:"STAY_PICKED_UP"}],r=[{name:"申请中",status:"APPLY"},{name:"通过",status:"PASS"},{name:"拒绝",status:"REFUSE"},{name:"买家退货，待卖家收货",status:"BUYER_RETURN"},{name:"卖家确认收货",status:"SELLER_CONFIRM"},{name:"卖家终止售后",status:"SELLER_TERMINATION"},{name:"买家确认收货",status:"BUYER_CONFIRM"},{name:"买家取消售后",status:"BUYER_CANCEL"},{name:"完成售后",status:"COMPLETE"},{name:"等待平台退款",status:"WAIT_REFUND"}]},9501:function(t,e,s){"use strict";s("9757")},9757:function(t,e,s){},ec64:function(t,e,s){"use strict";s("665e")},f270:function(t,e,s){}}]);