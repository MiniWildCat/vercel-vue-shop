(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-335128e8"],{1390:function(t,e,s){"use strict";s("47b4")},"3ca8":function(t,e,s){"use strict";s("f237")},"3cdb":function(t,e,s){"use strict";s("628f")},"47b4":function(t,e,s){},"628f":function(t,e,s){},7861:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",["goodsDetail"===t.type?e("div",{staticClass:"wrapper"},[e("div",{staticClass:"wr-l"},[e("Icon",{attrs:{size:"23",type:"ios-alarm-outline"}}),t._v(" 秒杀活动")],1),""===t.end?e("div",{staticClass:"count-down"},[e("p",[t._v("倒计时：")]),e("span",[t._v(t._s(t.hours))]),e("span",[t._v(t._s(t.minutes))]),e("span",[t._v(t._s(t.seconds))])]):e("div",[t._v(t._s(t.end))])]):e("span",{staticClass:"cart-promotion"},[""===t.end?e("span",[t._v("距活动结束："),e("span",[t._v(t._s(t.hours))]),t._v(" : "),e("span",[t._v(t._s(t.minutes))]),t._v(" : "),e("span",[t._v(t._s(t.seconds))])]):e("span",[t._v("活动已结束")])])])},a=[],o={props:{time:{default:1718977559428},type:{default:"goodsDetail",type:String}},data(){return{end:"",hours:"",minutes:"",seconds:"",interval:""}},mounted(){this.init()},methods:{countDown(t){function e(t){return t<10?"0"+t:t+""}var s=new Date,i=new Date(t),a=parseInt((i.getTime()-s.getTime())/1e3),o=parseInt(a/3600%24),n=parseInt(a/60%60),r=parseInt(a%60);o=e(o),n=e(n),r=e(r),this.hours=o,this.minutes=n,this.seconds=r,a<=0&&(this.end="活动已结束",clearInterval(this.interval))},init(){this.interval=setInterval(()=>{this.countDown(this.time)},1e3)}}},n=o,r=(s("1390"),s("2877")),c=Object(r["a"])(n,i,a,!1,null,"d6d9a094",null);e["a"]=c.exports},"7ded":function(t,e,s){"use strict";s.d(e,"e",(function(){return a})),s.d(e,"c",(function(){return o})),s.d(e,"h",(function(){return n})),s.d(e,"a",(function(){return r})),s.d(e,"j",(function(){return c})),s.d(e,"d",(function(){return l})),s.d(e,"i",(function(){return d})),s.d(e,"f",(function(){return u})),s.d(e,"b",(function(){return m})),s.d(e,"g",(function(){return p}));var i=s("ff66");function a(t){return Object(i["d"])({url:"/buyer/passport/member/register",method:i["a"].POST,needToken:!1,data:t})}function o(t){return Object(i["d"])({url:"/buyer/passport/member/userLogin",method:i["a"].POST,needToken:!1,data:t,headers:{clientType:"PC"}})}function n(t){return Object(i["d"])({url:"/buyer/passport/member/smsLogin",method:i["a"].POST,needToken:!1,data:t,headers:{clientType:"PC"}})}function r(t){return Object(i["d"])({url:"/buyer/passport/member",method:i["a"].GET,needToken:!0,params:t})}function c(t){window.open(`${i["b"]}/buyer/passport/connect/connect/login/web/${t}`,"blank")}function l(t){return Object(i["d"])({url:"/buyer/passport/connect/connect/result?state="+t,method:i["a"].GET,needToken:!1})}function d(t){return Object(i["d"])({url:"/buyer/passport/member/resetByMobile",method:i["a"].POST,needToken:!1,params:t})}function u(t){return Object(i["d"])({url:"/buyer/passport/member/resetPassword",method:i["a"].POST,needToken:!1,params:t})}function m(t){return Object(i["d"])({url:"/buyer/passport/member/pc_session",method:i["a"].POST,needToken:!1,params:t})}function p(t,e){return Object(i["d"])({url:"/buyer/passport/member/session_login/"+t,method:i["a"].POST,needToken:!1,params:e})}},"84a9":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return o})),s.d(e,"e",(function(){return n})),s.d(e,"g",(function(){return r})),s.d(e,"f",(function(){return c})),s.d(e,"a",(function(){return l})),s.d(e,"d",(function(){return d})),s.d(e,"h",(function(){return u}));var i=s("ff66");function a(t){return Object(i["d"])({url:"/buyer/store/store/apply/first",needToken:!0,method:i["a"].PUT,params:t})}function o(t){return Object(i["d"])({url:"/buyer/store/store/apply/second",needToken:!0,method:i["a"].PUT,params:t})}function n(t){return Object(i["d"])({url:"/buyer/store/store/apply/third",needToken:!0,method:i["a"].PUT,params:t})}function r(t){return Object(i["d"])({url:"/buyer/store/store/get/detail/"+t,needToken:!0,method:i["a"].GET})}function c(t){return Object(i["d"])({url:"/buyer/store/store/label/get/"+t,needToken:!0,method:i["a"].GET})}function l(){return Object(i["d"])({url:"/buyer/other/article/type/STORE_REGISTER",needToken:!0,method:i["a"].GET})}function d(){return Object(i["d"])({url:"/buyer/store/store/apply",needToken:!0,method:i["a"].GET})}function u(t,e){return Object(i["d"])({url:"/buyer/store/address/page/"+t,method:i["a"].GET,params:e})}},"8d4c":function(t,e,s){"use strict";s("cd85")},c2bd:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{background:"#fff"}},[e("BaseHeader"),e("Search"),e("div",{staticClass:"shop-item-path"},[e("div",{staticClass:"shop-nav-container"},[e("Breadcrumb",[e("BreadcrumbItem",{attrs:{to:"/"}},[t._v("首页")]),t._l(t.categoryBar,(function(s,i){return e("BreadcrumbItem",{key:i,attrs:{to:t.goGoodsList(i),target:"_blank"}},[t._v(" "+t._s(s.name)+" ")])}))],2),t.takeDownSale?t._e():e("div",{staticClass:"store-collect"},[t.goodsMsg.data?e("span",{staticClass:"mr_10"},[e("router-link",{attrs:{to:"Merchant?id="+t.goodsMsg.data.storeId}},[t._v(t._s(t.goodsMsg.data.storeName))])],1):t._e(),e("span",{on:{click:t.collect}},[e("Icon",{attrs:{type:"ios-heart",color:t.storeCollected?"#ed3f14":"#666"}}),t._v(" "+t._s(t.storeCollected?"已收藏店铺":"收藏店铺")+" ")],1),e("span",{staticClass:"ml_10",on:{click:function(e){return t.IMService(t.goodsMsg.data.storeId,t.goodsMsg.data.goodsId,t.goodsMsg.data.id)}}},[t._v("联系客服")])])],1)]),t.goodsMsg.data?e("ShowGoods",{attrs:{detail:t.goodsMsg},on:{handleClickSku:t.targetClickSku}}):t._e(),t.goodsMsg.data?e("ShowGoodsDetail",{attrs:{detail:t.goodsMsg}}):t._e(),t.takeDownSale?e("empty",{attrs:{_Title:"当前商品已下架"}},[e("div",{staticClass:"sale-btn"},[e("Button",{staticClass:"mr_10",attrs:{size:"small"},on:{click:function(e){return t.target("/")}}},[t._v("返回首页")]),e("Button",{attrs:{size:"small"},on:{click:function(e){return t.target("goodsList")}}},[t._v("返回商品列表")])],1)]):t._e(),t.isLoading?e("Spin",{attrs:{size:"large",fix:""}}):t._e(),e("BaseFooter")],1)},a=[],o=s("c106"),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"item-detail-show"},[e("div",{staticClass:"item-detail-left"},[t.imgList[t.imgIndex]?e("div",{staticClass:"item-detail-big-img"},[e("pic-zoom",{attrs:{url:t.imgList[t.imgIndex].url||t.imgList[t.imgIndex],scale:2}})],1):t._e(),e("div",{staticClass:"item-detail-img-row"},t._l(t.imgList,(function(s,i){return e("div",{key:i,staticClass:"item-detail-img-small",on:{mouseover:function(e){t.imgIndex=i}}},[e("img",{attrs:{src:s.url||s}})])})),0),e("div",{staticClass:"goodsConfig mt_10"},[e("span",{on:{click:t.collect}},[e("Icon",{attrs:{type:"ios-heart",color:t.isCollected?"#ed3f14":"#666"}}),t._v(t._s(t.isCollected?"已收藏":"收藏"))],1)])]),e("div",{staticClass:"item-detail-right"},[e("div",{staticClass:"item-detail-title"},[e("p",[t._v(" "+t._s(t.skuDetail.goodsName)+" "),"VIRTUAL_GOODS"!==t.skuDetail.goodsType?e("Tag",{staticStyle:{"margin-top":"10px"}},[t._v(" 实物商品 ")]):"VIRTUAL_GOODS"==t.skuDetail.goodsType?e("Tag",{staticStyle:{"margin-top":"10px"}},[t._v(" 虚拟商品 ")]):t._e()],1)]),e("div",{staticClass:"sell-point"},[t._v(" "+t._s(t.skuDetail.sellingPoint)+" ")]),t.promotionMap["SECKILL"]?e("Promotion",{attrs:{time:t.promotionMap["SECKILL"].endTime}}):t._e(),e("div",{staticClass:"item-detail-price-row"},[e("div",{staticClass:"item-price-left"},[t.skuDetail.promotionPrice&&t.promotionMap["SECKILL"]?e("div",{staticClass:"item-price-row"},[e("p",[t.promotionMap["SECKILL"]?e("span",{staticClass:"item-price-title"},[t._v("秒  杀 价")]):t._e(),e("span",{staticClass:"item-price"},[t._v(t._s(t._f("unitPrice")(t.skuDetail.promotionPrice,"￥")))]),e("span",{staticClass:"item-price-old"},[t._v(t._s(t._f("unitPrice")(t.skuDetail.price,"￥")))])])]):e("div",{staticClass:"item-price-row"},[t.wholesaleNum&&t.wholesaleNum.length?e("div",[e("div",{staticClass:"flex"},[e("div",{staticClass:"item-price-title"},[t._v(" 价     格 ")]),t._l(t.wholesalePrice,(function(s,i){return e("div",{key:i,staticClass:"item-price item-num"},[t._v(" "+t._s(t._f("unitPrice")(s,"￥"))+" ")])}))],2),e("div",{staticClass:"flex"},[e("div",{staticClass:"item-price-title"},[t._v("起 批 量")]),t._l(t.wholesaleNum,(function(s,i){return e("div",{key:i,staticClass:"item-num item-price-num"},[t._v(" "+t._s(s)+t._s(t.skuDetail.goodsUnit)+" ")])}))],2)]):e("div",[e("span",{staticClass:"item-price-title"},[t._v("价     格")]),e("span",{staticClass:"item-price"},[t._v(t._s(t._f("unitPrice")(t.skuDetail.price,"￥")))])])]),t.promotionMap["COUPON"].length?e("div",{staticClass:"item-price-coupon-row"},[e("p",{staticClass:"Ellipsis"},[e("span",{staticClass:"item-price-title"},[t._v("优 惠 券")]),e("span",t._l(t.promotionMap["COUPON"].slice(0,6),(function(s,i){return e("span",{key:i,staticClass:"item-coupon",on:{click:function(e){return t.receiveCoupon(s.id)}}},["PRICE"==s.couponType?e("span",[t._v("满"+t._s(s.consumeThreshold)+"减"+t._s(s.price))]):t._e(),"DISCOUNT"==s.couponType?e("span",[t._v("满"+t._s(s.consumeThreshold)+"打"+t._s(s.couponDiscount)+"折")]):t._e()])})),0)]),t.promotionMap["COUPON"].length>6?e("div",{staticClass:"dropdown"},[e("span",[t._v("展开更多")]),e("div",{staticClass:"dropdown-content"},t._l(t.promotionMap["COUPON"].slice(6,t.promotionMap["COUPON"].length),(function(s,i){return e("span",{key:i,staticClass:"item-coupon",on:{click:function(e){return t.receiveCoupon(s.id)}}},["PRICE"==s.couponType?e("span",[t._v("满"+t._s(s.consumeThreshold)+"减"+t._s(s.price))]):t._e(),"DISCOUNT"==s.couponType?e("span",[t._v("满"+t._s(s.consumeThreshold)+"打"+t._s(s.couponDiscount)+"折")]):t._e()])})),0)]):t._e(),e("p")]):t._e(),t.promotionMap["FULL_DISCOUNT"]?e("div",{staticClass:"item-price-row"},[e("p",[e("span",{staticClass:"item-price-title"},[t._v("促     销")]),e("span",{staticClass:"item-promotion"},[t._v("满减")]),t.promotionMap["FULL_DISCOUNT"].fullMinus?e("span",{staticClass:"item-desc-pintuan"},[t._v("满"+t._s(t.promotionMap["FULL_DISCOUNT"].fullMoney)+"元，立减现金"+t._s(t.promotionMap["FULL_DISCOUNT"].fullMinus)+"元")]):t._e(),t.promotionMap["FULL_DISCOUNT"].fullRate&&t.promotionMap["FULL_DISCOUNT"].fullRateFlag?e("span",{staticClass:"item-desc-pintuan"},[t._v("满"+t._s(t.promotionMap["FULL_DISCOUNT"].fullMoney)+"元，立享"+t._s(t.promotionMap["FULL_DISCOUNT"].fullRate)+"折")]):t._e()])]):t._e()]),e("div",{staticClass:"item-price-right"},[e("div",{staticClass:"item-remarks-sum"},[e("p",[t._v("累计评价")]),e("p",[e("span",{staticClass:"item-remarks-num"},[t._v(t._s(t.skuDetail.commentNum||0)+" 条")])])])])]),t._l(t.formatList,(function(s,i){return e("div",{key:s.name,staticClass:"item-select"},[e("div",{staticClass:"item-select-title"},[e("p",[t._v(t._s(s.name))])]),e("div",{staticClass:"item-select-column"},t._l(s.values,(function(s){return e("div",{key:s.value,staticClass:"item-select-row"},[e("div",{staticClass:"item-select-box",class:{"item-select-box-active":s.value===t.currentSelceted[i]},on:{click:function(e){return t.select(i,s.value)}}},[e("div",{staticClass:"item-select-intro"},[e("p",[t._v(t._s(s.value))])])])])})),0)])})),e("br"),e("div",{staticClass:"add-buy-car-box"},[e("div",{staticClass:"item-select"},[t._m(0),e("div",{staticClass:"item-select-row"},[e("InputNumber",{attrs:{min:1,max:t.skuDetail.quantity,disabled:0===t.skuDetail.quantity,precision:.1},on:{"on-blur":t.changeCount},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}}),e("span",{staticClass:"inventory"},[t._v(" 库存"+t._s(t.skuDetail.quantity))])],1)]),"VIRTUAL_GOODS"!==t.skuDetail.goodsType&&0!==t.skuDetail.weight?e("div",{staticClass:"item-select"},[t._m(1),e("div",{staticClass:"item-select-row"},[e("span",{staticClass:"inventory"},[t._v(" "+t._s(t.skuDetail.weight)+"kg")])])]):t._e(),"POINT"===t.$route.query.way&&"PASS"===t.skuDetail.authFlag?e("div",{staticClass:"add-buy-car"},[e("Button",{attrs:{type:"error",loading:t.loading,disabled:0===t.skuDetail.quantity},on:{click:t.pointPay}},[t._v("积分购买")])],1):t._e(),"POINT"!==t.$route.query.way&&"PASS"===t.skuDetail.authFlag?e("div",{staticClass:"add-buy-car"},["VIRTUAL_GOODS"!==t.skuDetail.goodsType?e("Button",{attrs:{type:"error",loading:t.loading,disabled:0===t.skuDetail.quantity},on:{click:t.addShoppingCartBtn}},[t._v("加入购物车")]):t._e(),e("Button",{attrs:{type:"warning",loading:t.loading1,disabled:0===t.skuDetail.quantity},on:{click:t.buyNow}},[t._v("立即购买")]),t.skuDetail.goodsVideo?e("Tooltip",{attrs:{content:"观看视频"}},[e("img",{staticClass:"view-video",attrs:{src:s("dada"),alt:""},on:{click:function(e){t.showGoodsVideo=!0}}})]):t._e()],1):t._e()])],2),e("Modal",{attrs:{title:"浏览视频"},model:{value:t.showGoodsVideo,callback:function(e){t.showGoodsVideo=e},expression:"showGoodsVideo"}},[e("div",{attrs:{id:"dplayer"}})])],1)])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-select-title"},[e("p",[t._v("数量")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-select-title"},[e("p",[t._v("重量")])])}],c=s("7861"),l=s("86bd"),d=s("f7a5"),u=s.n(d),m=s("8194"),p=s("2166"),h={name:"ShowGoods",props:{detail:{type:Object,default:null}},watch:{detail:{handler(t){this.skuDetail=t.data,this.wholesaleList=t.wholesaleList,this.wholesaleList&&this.wholesaleList.length>0&&(this.count=this.wholesaleList[0].num),this.promotion(),this.swiperGoodsImg()},deep:!0,immediate:!0},showGoodsVideo(t){t&&this.initVideo()}},data(){return{showGoodsVideo:!1,goodsVideo:"",wholesaleList:[],count:1,imgIndex:0,currentSelceted:[],imgList:[],skuDetail:{specList:[]},goodsSpecList:this.detail.specs,promotionMap:{SECKILL:null,FULL_DISCOUNT:null,COUPON:[]},formatList:[],loading:!1,loading1:!1,isCollected:!1}},components:{PicZoom:l["a"],Promotion:c["a"]},computed:{wholesalePrice(t){return this.wholesaleList.length?this.wholesaleList.map(t=>t.price):[]},wholesaleNum(t){return this.wholesaleList.length?this.wholesaleList.map(t=>t.num):[]}},methods:{initVideo(){this.goodsVideo||setTimeout(()=>{this.goodsVideo=new u.a({container:document.getElementById("dplayer"),video:{url:this.skuDetail.goodsVideo}})},100)},changeCount(t){this.wholesaleList&&this.wholesaleList.length>0&&this.count<=this.wholesaleList[0].num&&(this.$Message.warning("批发商品购买数量不能小于起批数量"),this.count=this.wholesaleList[0].num)},select(t,e){this.$set(this.currentSelceted,t,e);let s=this.goodsSpecList.find(t=>{let e=!0,s=t.specValues.filter(t=>"images"!==t.specName);for(let i=0;i<s.length;i++)if(s[i].specValue!==this.currentSelceted[i])return void(e=!1);if(e)return t});this.$emit("handleClickSku",{skuId:s.skuId,goodsId:this.skuDetail.goodsId})},addShoppingCartBtn(){const t={num:this.count,skuId:this.skuDetail.id};this.loading=!0,Object(p["a"])(t).then(t=>{this.loading=!1,t.success?this.$router.push({path:"/shoppingCart",query:{detail:this.skuDetail,count:this.count}}):this.$Message.warning(t.message)}).catch(()=>{this.loading=!1})},buyNow(){const t={num:this.count,skuId:this.skuDetail.id,cartType:"BUY_NOW"};"VIRTUAL_GOODS"===this.skuDetail.goodsType&&(t.cartType="VIRTUAL"),this.loading1=!0,Object(p["a"])(t).then(e=>{this.loading1=!1,e.success?this.$router.push({path:"/pay",query:{way:t.cartType}}):this.$Message.warning(e.message)}).catch(()=>{this.loading1=!1})},async collect(){if(this.isCollected){let t=await Object(m["k"])("GOODS",this.skuDetail.id);t.success&&(this.$Message.success("取消收藏成功"),this.isCollected=!1)}else{let t=await Object(m["p"])("GOODS",this.skuDetail.id);200===t.code&&(this.isCollected=!0,this.$Message.success("收藏商品成功,可以前往个人中心我的收藏查看"))}},formatSku(t){let e=[{}];t.forEach((t,s)=>{t.specValues.forEach((s,i)=>{let a=s.specName,o={value:s.specValue,quantity:t.quantity};"images"!==a&&e.forEach((t,s)=>{t.name===a&&t.values&&!t.values.find(t=>t.value===o.value)&&t.values.push(o);let i=e.map(t=>t.name);i.includes(a)||e.push({name:a,values:[o]})})})}),e.shift(),this.formatList=e;let s=t.filter(t=>t.skuId===this.$route.query.skuId)[0];s&&s.specValues.filter(t=>"images"!==t.specName).forEach((t,e)=>{this.currentSelceted[e]=t.specValue}),this.skuList=t},receiveCoupon(t){Object(m["Q"])(t).then(t=>{t.success?this.$Message.success("优惠券领取成功"):this.$Message.warning(t.message)})},promotion(){if(this.promotionMap={SECKILL:null,FULL_DISCOUNT:null,COUPON:[]},!this.detail.promotionMap)return!1;let t=Object.keys(this.detail.promotionMap);if(0===t.length)return!1;for(let e=0;e<t.length;e++){let s=t[e].split("-")[0];"COUPON"===s?this.promotionMap[s].push(this.detail.promotionMap[t[e]]):this.promotionMap[s]=this.detail.promotionMap[t[e]]}},swiperGoodsImg(){this.skuDetail.specList.forEach(t=>{"images"===t.specName&&(this.imgList=this.skuDetail.goodsGalleryList.filter(t=>-1===t.indexOf('"url":')&&-1===t.indexOf('"status":')))}),this.imgList||(this.imgList=[this.skuDetail.original])}},mounted(){this.Cookies.getItem("userInfo")&&Object(m["J"])("GOODS",this.skuDetail.id).then(t=>{t.success&&t.result&&(this.isCollected=!0)}),this.formatSku(this.goodsSpecList),document.title=this.skuDetail.goodsName}},g=h,v=(s("8d4c"),s("2877")),_=Object(v["a"])(g,n,r,!1,null,"1fa36584",null),f=_.exports,k=s("cea8"),C=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"auto"}},[e("div",{staticClass:"item-intro-show"},[e("div",{ref:"itemIntroDetail",staticClass:"item-intro-detail"},[e("div",{staticClass:"item-intro-nav item-tabs"},[e("Tabs",{attrs:{animated:!1},on:{"on-click":t.tabClick}},[e("TabPane",{attrs:{label:"商品介绍"}},[e("div",{ref:"itemIntroGoods",staticClass:"item-intro-img"},[t.skuDetail.intro?e("div",{staticClass:"item-intro",domProps:{innerHTML:t._s(t.skuDetail.intro)}}):e("div",{staticStyle:{margin:"20px"}},[t._v("暂无商品介绍")])])]),e("TabPane",{attrs:{label:"商品评价"}},[e("div",{ref:"itemGoodsComment",staticClass:"remarks-container"},[e("div",{staticClass:"remarks-analyse-box"},[e("div",{staticClass:"remarks-analyse-goods"},[e("i-circle",{attrs:{percent:t.skuDetail.grade,"stroke-color":"#5cb85c"}},[e("span",{staticClass:"remarks-analyse-num"},[t._v(t._s(t.skuDetail.grade)+"%")]),e("p",{staticClass:"remarks-analyse-title"},[t._v("好评率")])])],1)]),e("div",{staticClass:"remarks-bar"},[e("span",{class:{selectedBar:""===t.commentParams.grade},on:{click:function(e){return t.viewByGrade("")}}},[t._v("全部("+t._s(t.commentTypeNum.all)+")")]),e("span",{class:{selectedBar:"GOOD"===t.commentParams.grade},on:{click:function(e){return t.viewByGrade("GOOD")}}},[t._v("好评("+t._s(t.commentTypeNum.good)+")")]),e("span",{class:{selectedBar:"MODERATE"===t.commentParams.grade},on:{click:function(e){return t.viewByGrade("MODERATE")}}},[t._v("中评("+t._s(t.commentTypeNum.moderate)+")")]),e("span",{class:{selectedBar:"WORSE"===t.commentParams.grade},on:{click:function(e){return t.viewByGrade("WORSE")}}},[t._v("差评("+t._s(t.commentTypeNum.worse)+")")])]),0===t.commentList.length?e("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[t._v(" 暂无评价数据 ")]):t._l(t.commentList,(function(s,i){return e("div",{key:i,staticClass:"remarks-box"},[e("div",{staticClass:"remarks-user"},[e("Avatar",{attrs:{src:s.memberProfile}}),e("span",{staticClass:"remarks-user-name"},[t._v(t._s(t._f("secrecyMobile")(s.memberName)))])],1),e("div",{staticClass:"remarks-content-box"},[e("p",[e("Rate",{staticClass:"remarks-star",attrs:{disabled:"",value:Number(s.descriptionScore),"allow-half":""}})],1),e("p",{staticClass:"remarks-content"},[t._v(t._s(s.content))]),s.images?e("div",{staticClass:"comment-img"},t._l(s.images.split(","),(function(i,a){return e("div",{key:a,class:{borderColor:i===s.previewImg},on:{click:function(e){return t.previewImg(i,s)}}},[e("img",{attrs:{src:i,alt:""}})])})),0):t._e(),s.previewImg?e("div",{staticClass:"preview-img",on:{click:function(e){return e.preventDefault(),t.hidePreviewImg(s)}}},[e("div",[e("span",{on:{click:function(e){return e.stopPropagation(),t.rotatePreviewImg(0,s)}}},[e("Icon",{attrs:{type:"md-refresh"}}),t._v("左转")],1),e("span",{on:{click:function(e){return e.stopPropagation(),t.rotatePreviewImg(1,s)}}},[e("Icon",{attrs:{type:"md-refresh"}}),t._v("右转")],1)]),e("img",{style:{transform:`rotate(${s.deg}deg)`},attrs:{src:s.previewImg,width:"198",alt:""}})]):t._e(),e("p",{staticClass:"remarks-sub"},[e("span",{staticClass:"remarks-item"},[t._v(t._s(s.goodsName))]),e("span",{staticClass:"remarks-time"},[t._v(t._s(s.createTime))])]),s.reply?e("div",{staticClass:"reply"},[e("p",[t._v("商家回复")]),e("div",[e("p",{staticClass:"remarks-content"},[t._v(t._s(s.reply))]),e("div",[s.replyImage?e("div",{staticClass:"comment-img"},t._l(s.replyImage.split(","),(function(s,i){return e("div",{key:i,on:{click:function(e){return t.$previewImage(s)}}},[e("img",{attrs:{src:s,alt:""}})])})),0):t._e()])])]):t._e()])])})),e("div",{staticClass:"remarks-page"},[e("Page",{attrs:{total:t.commentTotal,size:"small","page-size":t.commentParams.pageSize},on:{"on-change":t.changePageNum,"on-page-size-change":t.changePageSize}})],1)],2)]),e("TabPane",{attrs:{label:"商品参数"}},[t.detail.goodsParamsDTOList&&t.detail.goodsParamsDTOList.length?t._l(t.detail.goodsParamsDTOList,(function(s){return e("div",{key:s.groupId,staticClass:"goods-params",staticStyle:{height:"inherit"}},[e("span",{staticClass:"ml_10"},[t._v(t._s(s.groupName))]),e("table",{staticClass:"mb_10",attrs:{cellpadding:"0",cellspacing:"0"}},t._l(s.goodsParamsItemDTOList,(function(s){return e("tr",{key:s.paramId},[e("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(s.paramName))]),e("td",[t._v(t._s(s.paramValue))])])})),0)])})):e("div",[t._v("暂无商品参数")])],2)],1)],1)])])])},b=[],y={name:"ShowGoodsDetail",props:{detail:{type:Object,default:null}},data(){return{commentList:[],commentParams:{pageNumber:1,pageSize:10,grade:"",goodsId:""},commentTypeNum:{},commentTotal:0,onceFlag:!0}},computed:{skuDetail(){return this.detail.data}},methods:{changeHeight(t){let e=window.getComputedStyle(this.$refs[t]).height;e=parseInt(e.substr(0,e.length-2))+89,this.$refs.itemIntroDetail.style.height=e+"px"},changePageNum(t){this.commentParams.pageNumber=t,this.getList()},changePageSize(t){this.commentParams.pageNumber=1,this.commentParams.pageSize=t,this.getList()},getList(){this.commentParams.goodsId=this.skuDetail.goodsId,Object(m["G"])(this.commentParams).then(t=>{t.success&&(this.commentList=t.result.records,this.commentTotal=t.result.total)}),Object(m["H"])(this.skuDetail.goodsId).then(t=>{t.success&&(this.commentTypeNum=t.result)})},viewByGrade(t){this.$set(this.commentParams,"grade",t),this.commentParams.pageNumber=1,this.getList()},tabClick(t){0===t?this.$nextTick(()=>{this.changeHeight("itemIntroGoods")}):this.$nextTick(()=>{this.changeHeight("itemGoodsComment")})},previewImg(t,e){this.$set(e,"previewImg",t),this.$nextTick(()=>{this.changeHeight("itemGoodsComment")})},hidePreviewImg(t){this.$set(t,"previewImg",""),this.$nextTick(()=>{this.changeHeight("itemGoodsComment")})},rotatePreviewImg(t,e){t?e.deg?this.$set(e,"deg",e.deg+90):this.$set(e,"deg",90):e.deg?this.$set(e,"deg",e.deg-90):this.$set(e,"deg",-90)},handleScroll(){this.onceFlag&&(this.$nextTick(()=>{this.changeHeight("itemIntroGoods")}),this.onceFlag=!1)}},mounted(){this.$nextTick(()=>{setTimeout(this.changeHeight("itemIntroGoods"),2e3)}),window.addEventListener("scroll",this.handleScroll),this.getList(),null!==this.skuDetail.grade&&void 0!==this.skuDetail.grade||(this.skuDetail.grade=100)}},w=y,I=(s("3ca8"),Object(v["a"])(w,C,b,!1,null,"326e760b",null)),T=I.exports,O=s("c40e"),L=s("84a9"),D=s("def3"),S={name:"GoodsDetail",beforeRouteEnter(t,e,s){window.scrollTo(0,0),s()},created(){this.getGoodsDetail()},mixins:[D["a"]],data(){return{goodsMsg:{},isLoading:!1,categoryBar:[],storeCollected:!1,storeMsg:{},takeDownSale:!1}},methods:{target(t){this.$router.push({path:t})},targetClickSku(t){this.getGoodsDetail(t)},getGoodsDetail(t){this.isLoading=!0;const e=t||this.$route.query;let s=e&&e.distributionId?e.distributionId:this.Cookies.getItem("distributionId");if(s){console.log(s),this.Cookies.setItem("distributionId",e.distributionId);let t=this;Object(m["C"])(e.distributionId).then(e=>{e.success&&t.Cookies.removeItem("distributionId")})}Object(O["d"])(e).then(t=>{if(this.isLoading=!1,t.success){const e=t.result,s=t.result.categoryName,i=e.data.categoryPath.split(","),a=[];i.forEach((t,e)=>{a.push({id:t,name:s?s[e]:""})}),this.categoryBar=a,this.$set(this,"goodsMsg",t.result),this.goodsMsg.data.intro||(this.goodsMsg.data.intro=""),this.Cookies.getItem("userInfo")&&Object(m["K"])("STORE",this.goodsMsg.data.storeId).then(t=>{t.success&&t.result&&(this.storeCollected=!0)}),this.storeMsg||Object(L["g"])(this.goodsMsg.data.storeId).then(t=>{t.success&&(this.storeMsg=t.result)})}else this.$Message.error(t.message),this.isLoading=!1}).catch(t=>{this.isLoading=!1,11001===t.code&&(this.takeDownSale=!0)})},goGoodsList(t){const e=[];return this.categoryBar.forEach((s,i)=>{i<=t&&e.push(s.id)}),location.origin+"/goodsList?categoryId="+e.toString()},async collect(){if(this.storeCollected){let t=await Object(m["l"])("STORE",this.goodsMsg.data.storeId);t.success&&(this.$Message.success("已取消收藏"),this.storeCollected=!1)}else{let t=await Object(m["r"])("STORE",this.goodsMsg.data.storeId);200===t.code&&(this.storeCollected=!0,this.$Message.success("收藏店铺成功,可以前往个人中心我的收藏查看"))}}},watch:{},components:{Search:o["a"],ShowGoods:f,ShowGoodsDetail:T,empty:k["a"]}},M=S,P=(s("3cdb"),Object(v["a"])(M,i,a,!1,null,"4c45827d",null));e["default"]=P.exports},cd85:function(t,e,s){},dada:function(t,e,s){t.exports=s.p+"static/img/play.dd2b1421.svg"},def3:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div")},a=[],o=s("2934"),n=s("e487"),r=s("7ded"),c={data(){return{Storage:n["a"],IMLink:""}},methods:{async IMService(t,e,s){let i=n["a"].getItem("accessToken");await this.getIMDetailMethods();const a=await Object(r["a"])();a.success?e&&s?window.open(this.IMLink+"?token="+i+"&id="+t||this.storeMsg.storeId+"&goodsId="+e+"&skuId="+s):window.open(this.IMLink+"?token="+i+"&id="+t||this.storeMsg.storeId):this.$Message.error("请登录后再联系客服")},async getIMDetailMethods(){let t=await Object(o["e"])();t.success&&(this.IMLink=t.result)}}},l=c,d=s("2877"),u=Object(d["a"])(l,i,a,!1,null,"588e26a1",null);e["a"]=u.exports},f237:function(t,e,s){}}]);