(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3da16ed9"],{"4b21":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"wrapper"},[s("card",{attrs:{_Title:"我的售后",_Size:16}}),s("div",{staticClass:"mb_20 box"},[s("div",{staticClass:"global_float_right"},[s("Input",{staticClass:"width_300",attrs:{search:"","enter-button":"",placeholder:"请输入订单号搜索"},on:{"on-search":t.getList},model:{value:t.params.keywords,callback:function(s){t.$set(t.params,"keywords",s)},expression:"params.keywords"}})],1)]),0===t.orderList.length?s("empty"):s("div",{staticClass:"order-content"},[t._l(t.orderList,(function(e,i){return[s("div",{key:i,staticClass:"order-list"},[s("div",{staticClass:"order-header"},[s("div",[e.serviceStatus?s("div",[t._v(t._s(t.filterOrderStatus(e.serviceStatus)))]):t._e(),s("div",[t._v(" 售后单号："+t._s(e.sn)+"      "+t._s(e.createTime)+"    "+t._s(t._f("secrecyMobile")(e.memberName))+" ")])]),s("div",[s("span",[t._v("申请退款金额："),s("span",{staticClass:"global_color"},[t._v(t._s(t._f("unitPrice")(e.applyRefundPrice,"￥")))])])])]),s("div",{staticClass:"order-body"},[s("div",{staticClass:"goods-list"},[s("img",{staticClass:"hover-color",attrs:{src:e.goodsImage,alt:""},on:{click:function(s){return t.goodsDetail(e.skuId,e.goodsId)}}}),s("div",[s("div",{staticClass:"hover-color",on:{click:function(s){return t.goodsDetail(e.skuId,e.goodsId)}}},[t._v(t._s(e.goodsName))]),s("div",{staticClass:"mt_10"},[t._v(" x "+t._s(e.num)+" ")])])]),s("div",[s("span",{on:{click:function(s){return t.shopPage(e.shopId)}}},[t._v(t._s(e.storeName))])]),s("div",[s("Button",{attrs:{type:"info",size:"small"},on:{click:function(s){return t.goDetail(e.sn)}}},[t._v("售后详情")]),"PASS"==e.serviceStatus&&"RETURN_MONEY"!=e.serviceType?s("Button",{attrs:{type:"warning",size:"small"},on:{click:function(s){return t.openModal(e)}}},[t._v("提交物流 ")]):t._e(),e.afterSaleAllowOperationVO.cancel?s("Button",{attrs:{type:"error",size:"small"},on:{click:function(s){return t.cancel(e.sn)}}},[t._v(" 取消售后 ")]):t._e()],1)])])]})),t.spinShow?s("Spin",{attrs:{size:"large",fix:""}}):t._e()],2),s("div",{staticClass:"page-size"},[s("Page",{attrs:{total:t.total,"page-size":t.params.pageSize,"show-sizer":""},on:{"on-change":t.changePageNum,"on-page-size-change":t.changePageSize}})],1),s("Modal",{attrs:{width:"530"},model:{value:t.logisticsShow,callback:function(s){t.logisticsShow=s},expression:"logisticsShow"}},[s("p",{attrs:{slot:"header"},slot:"header"},[s("span",[t._v("提交物流信息")])]),s("div",[s("div",{staticClass:"goods-list modal-goods"},[s("img",{staticClass:"hover-color",attrs:{src:t.singleOrder.goodsImage,alt:""},on:{click:function(s){return t.goodsDetail(t.singleOrder.skuId,t.singleOrder.goodsId)}}}),s("div",[s("div",{staticClass:"hover-color",on:{click:function(s){return t.goodsDetail(t.singleOrder.skuId,t.singleOrder.goodsId)}}},[t._v(" "+t._s(t.singleOrder.goodsName)+" ")]),s("div",{staticClass:"mt_10"},[s("span",{staticClass:"global_color"},[t._v(t._s(t._f("unitPrice")(t.singleOrder.flowPrice,"￥"))+" ")]),t._v("x "+t._s(t.singleOrder.num)+" ")])])]),s("Form",{ref:"form",attrs:{model:t.form,"label-position":"left","label-width":100,rules:t.rules}},[s("FormItem",{attrs:{label:"物流公司",prop:"logisticsId"}},[s("Select",{attrs:{placeholder:"请选择物流公司"},model:{value:t.form.logisticsId,callback:function(s){t.$set(t.form,"logisticsId",s)},expression:"form.logisticsId"}},t._l(t.companyList,(function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),s("FormItem",{attrs:{label:"物流单号",prop:"logisticsNo"}},[s("Input",{attrs:{placeholder:"请填写物流单号"},model:{value:t.form.logisticsNo,callback:function(s){t.$set(t.form,"logisticsNo",s)},expression:"form.logisticsNo"}})],1),s("FormItem",{attrs:{label:"发货时间",prop:"mDeliverTime"}},[s("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择发货时间"},on:{"on-change":t.changeTime},model:{value:t.form.mDeliverTime,callback:function(s){t.$set(t.form,"mDeliverTime",s)},expression:"form.mDeliverTime"}})],1)],1)],1),s("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(s){t.logisticsShow=!1}}},[t._v("关闭")]),s("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitDelivery}},[t._v("提交")])],1)])],1)},a=[],o=e("8194"),r=e("f8b7"),n=e("9243"),l={name:"AfterSale",data(){return{orderList:[],params:{pageNumber:1,pageSize:10,sn:"",sort:"createTime",order:"desc"},afterSaleStatusList:n["a"],total:0,spinShow:!1,companyList:[],logisticsShow:!1,singleOrder:{},form:{afterSaleSn:"",logisticsId:"",logisticsNo:"",mDeliverTime:""},rules:{logisticsId:[{required:!0,message:"请选择物流公司"}],logisticsNo:[{required:!0,message:"请填写物流编号"}],mDeliverTime:[{required:!0,message:"请选择发货时间"}]},submitLoading:!1}},mounted(){this.getList()},methods:{goDetail(t){this.$router.push({name:"AfterSaleDetail",query:{sn:t}})},cancel(t){this.$Modal.confirm({title:"取消",content:"<p>确定取消此次售后申请吗？</p>",onOk:()=>{Object(o["j"])(t).then(t=>{t.success&&(this.$Message.success("取消售后申请成功"),this.getList())})},onCancel:()=>{}})},goodsDetail(t,s){let e=this.$router.resolve({path:"/goodsDetail",query:{skuId:t,goodsId:s}});window.open(e.href,"_blank")},shopPage(t){let s=this.$router.resolve({path:"/Merchant",query:{id:t}});window.open(s.href,"_blank")},getList(){this.spinShow=!0;let t=JSON.parse(JSON.stringify(this.params));Object(o["d"])(t).then(t=>{this.spinShow=!1,t.success&&(this.orderList=t.result.records,this.total=t.result.total)})},changePageNum(t){this.params.pageNumber=t,this.getList()},changePageSize(t){this.params.pageNumber=1,this.params.pageSize=t,this.getList()},filterOrderStatus(t){const s=this.afterSaleStatusList.filter(s=>s.status===t);return s[0].name},getCompany(){Object(r["f"])().then(t=>{t.success&&(this.companyList=t.result)})},submitDelivery(){this.submitLoading=!0,Object(r["a"])(this.form).then(t=>{t.success&&(this.logisticsShow=!1,this.$Message.success("提交成功"),this.getList()),this.submitLoading=!1}).catch(()=>{this.submitLoading=!1})},openModal(t){console.log(t),this.singleOrder=t,this.form.afterSaleSn=t.sn,this.logisticsShow=!0,this.$refs.form.resetFields(),this.companyList.length||this.getCompany()},changeTime(t){this.form.mDeliverTime=t}}},c=l,d=(e("e787"),e("2877")),u=Object(d["a"])(c,i,a,!1,null,"2f3ecd71",null);s["default"]=u.exports},9243:function(t,s,e){"use strict";e.d(s,"b",(function(){return i})),e.d(s,"a",(function(){return a}));const i=[{name:"全部",status:"ALL"},{name:"未付款",status:"UNPAID"},{name:"已付款",status:"PAID"},{name:"待发货",status:"UNDELIVERED"},{name:"已发货",status:"DELIVERED"},{name:"已完成",status:"COMPLETED"},{name:"待核验",status:"TAKE"},{name:"已关闭",status:"CANCELLED"},{name:"待提货",status:"STAY_PICKED_UP"}],a=[{name:"申请中",status:"APPLY"},{name:"通过",status:"PASS"},{name:"拒绝",status:"REFUSE"},{name:"买家退货，待卖家收货",status:"BUYER_RETURN"},{name:"卖家确认收货",status:"SELLER_CONFIRM"},{name:"卖家终止售后",status:"SELLER_TERMINATION"},{name:"买家确认收货",status:"BUYER_CONFIRM"},{name:"买家取消售后",status:"BUYER_CANCEL"},{name:"完成售后",status:"COMPLETE"},{name:"等待平台退款",status:"WAIT_REFUND"}]},bb03:function(t,s,e){},e787:function(t,s,e){"use strict";e("bb03")}}]);