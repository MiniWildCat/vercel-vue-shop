(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-257c0f03"],{"962b":function(t,a,e){},d259:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",[a("card",{attrs:{_Title:"收货地址"}}),a("div",{staticClass:"add-box"},[a("Form",{ref:"form",attrs:{model:t.formData,"label-position":"left","label-width":100,rules:t.ruleInline}},[a("FormItem",{attrs:{label:"收件人",prop:"name"}},[a("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入收件人姓名"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name",a)},expression:"formData.name"}})],1),a("FormItem",{attrs:{label:"收件地区",prop:"address"}},[a("span",[t._v(t._s(t.formData.address||"暂无地址"))]),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",size:"small"},on:{click:function(a){return t.$refs.map.open()}}},[t._v("选择")])],1),a("FormItem",{attrs:{label:"详细地址",prop:"detail"}},[a("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入详细地址"},model:{value:t.formData.detail,callback:function(a){t.$set(t.formData,"detail",a)},expression:"formData.detail"}})],1),a("FormItem",{attrs:{label:"手机号码",prop:"mobile"}},[a("i-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入收件人手机号"},model:{value:t.formData.mobile,callback:function(a){t.$set(t.formData,"mobile",a)},expression:"formData.mobile"}})],1),a("FormItem",{attrs:{label:"地址别名"}},[a("i-input",{staticStyle:{width:"600px"},attrs:{length:"",maxlength:4,placeholder:"请输入地址别名，例如公司"},model:{value:t.formData.alias,callback:function(a){t.$set(t.formData,"alias",a)},expression:"formData.alias"}})],1),a("FormItem",{attrs:{label:"默认地址"}},[a("i-switch",{model:{value:t.formData.isDefault,callback:function(a){t.$set(t.formData,"isDefault",a)},expression:"formData.isDefault"}})],1)],1)],1),a("div",{staticClass:"mt_20"},[a("Button",{staticClass:"mr_10",attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("保存收货地址")]),a("Button",{on:{click:function(a){return t.$router.back()}}},[t._v("返回")])],1),a("multipleMap",{ref:"map",on:{callback:t.getAddress}})],1)},r=[],i=e("3951"),l=e("a5d4"),o=e("7dfd"),d=e("2f94"),n={name:"AddAddress",data(){return{formData:{isDefault:!1},ruleInline:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"change"}],detail:[{required:!0,message:"请输入详细地址",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码"},{pattern:o["mobile"],trigger:"blur",message:"请输入正确的手机号"}]},loading:!1,mapMsg:{}}},methods:{save(){this.$refs.form.validate(t=>{if(t){const t=JSON.parse(JSON.stringify(this.formData));t.consigneeAddressPath=t.address.replace(/\s/g,","),delete t.address,this.loading=!0,this.$route.query.id?Object(d["b"])(t).then(t=>{t.success&&(this.loading=!1,this.$router.push("/home/MyAddress"))}).catch(()=>{this.loading=!1}):Object(d["f"])(t).then(t=>{t.success&&(this.loading=!1,this.$router.push("/home/MyAddress"))}).catch(()=>{this.loading=!1})}})},getAddrById(t){Object(d["c"])(t).then(t=>{if(t.success){console.log(t);const a=t.result;a.address=t.result.consigneeAddressPath.replace(/,/g," "),this.formData=a}})},getAddress(t){if("select"===t.type){const a=t.data.map(t=>t.name).join(","),e=t.data.map(t=>t.id).join(",");this.$set(this.formData,"address",a),this.$set(this.formData,"consigneeAddressIdPath",e);const s=t.data[t.data.length-1].center.split(",");this.formData.lat=s[1],this.formData.lon=s[0]}else this.$set(this.formData,"address",t.data.addr),this.$set(this.formData,"consigneeAddressIdPath",t.data.addrId),this.$set(this.formData,"detail",t.data.address),this.formData.lat=t.data.position.lat,this.formData.lon=t.data.position.lng}},mounted(){const t=this.$route.query.id;t&&this.getAddrById(t)},components:{card:i["a"],multipleMap:l["a"]}},m=n,c=(e("e3d7"),e("2877")),u=Object(c["a"])(m,s,r,!1,null,"1a348324",null);a["default"]=u.exports},e3d7:function(t,a,e){"use strict";e("962b")}}]);