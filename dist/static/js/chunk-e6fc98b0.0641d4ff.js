(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6fc98b0"],{"441c":function(t,s,e){},8351:function(t,s,e){"use strict";e("c15b")},c15b:function(t,s,e){},f896:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"wrapper"},[s("BaseHeader"),s("Search",{on:{search:t.handleSearch}}),s("div",{staticClass:"container"},[s("GoodsClassNav",{on:{getParams:t.getParams}}),s("div",{staticClass:"goods-box"},[s("div",{staticClass:"goods-list-box"},[s("div",{staticClass:"goods-list-tool"},[s("ul",[t._l(t.goodsTool,(function(e,a){return s("li",{key:a,on:{click:function(s){return t.orderBy(e.en,a)}}},[s("span",{class:{"goods-list-tool-active":a===t.sortIndex}},[t._v(t._s(e.title)),s("Icon",{attrs:{type:"ios-arrow-round-down"}})],1)])})),s("li",{staticClass:"price-sort",on:{click:function(s){return t.orderBy("price",5,"up")}}},[s("span",{class:{"goods-list-tool-active":5===t.sortIndex}},[t._v(" 价格 "),s("div",[s("Icon",{class:{"price-color":"desc"==t.sortPriceIndex},attrs:{type:"md-arrow-dropup"}}),s("Icon",{class:{"price-color":"asc"==t.sortPriceIndex},attrs:{type:"md-arrow-dropdown"}})],1)])])],2)]),s("div",{staticClass:"goods-list"},[0===t.goodsList.length?s("empty"):t._l(t.goodsList,(function(e,a){return s("div",{key:a,staticClass:"goods-show-info",on:{click:function(s){return t.goGoodsDetail(e.id,e.goodsId)}}},[s("div",{staticClass:"goods-show-img"},[s("img",{attrs:{width:"220",height:"220",src:e.thumbnail}})]),s("div",{staticClass:"goods-show-price"},[s("span",[s("span",{staticClass:"seckill-price text-danger"},[t._v(t._s(t._f("unitPrice")(e.price,"￥")))])])]),s("div",{staticClass:"goods-show-detail"},["WHOLESALE"===e.salesModel?s("Tag",{staticClass:"goods-show-tag",attrs:{color:"purple"}},[t._v(" 批发 ")]):t._e(),s("span",[t._v(t._s(e.goodsName))])],1),s("div",{staticClass:"goods-show-num"},[t._v(" 已有"),s("span",[t._v(t._s(e.commentNum||0))]),t._v("人评价 ")]),s("div",{staticClass:"goods-show-seller"},[s("span",{staticClass:"text-bottom",staticStyle:{color:"#e4393c"}},[t._v(t._s(e.storeName))])]),s("div",{staticClass:"goods-show-right"},[e.selfOperated?s("Tag",{staticClass:"goods-show-tag",attrs:{color:"red"}},[t._v(" 自营 ")]):t._e(),"VIRTUAL_GOODS"===e.goodsType?s("Tag",{staticClass:"goods-show-tag",attrs:{color:"blue"}},[t._v(" 虚拟 ")]):"PHYSICAL_GOODS"===e.goodsType?s("Tag",{staticClass:"goods-show-tag",attrs:{color:"blue"}},[t._v(" 实物 ")]):t._e()],1)])}))],2)])]),s("div",{staticClass:"goods-page"},[s("Page",{attrs:{"show-total":"","show-sizer":"",total:t.total,"page-size":t.params.pageSize},on:{"on-change":t.changePageNum,"on-page-size-change":t.changePageSize}})],1)],1),t.loading?s("Spin",{attrs:{size:"large",fix:""}}):t._e(),s("BaseFooter")],1)},o=[],i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"item-class-show"},[s("div",{staticClass:"head-bar"},[t.$route.query.categoryId?[s("div",{on:{click:function(s){return t.cateClick(t.tabBar,1)}}},[t._v(t._s(t.tabBar.name))]),s("Icon",{attrs:{type:"ios-arrow-forward"}}),t.tabBar.first?s("div",{staticClass:"bar"},[t._v(" "+t._s(t.tabBar.first.name)+" "),s("Icon",{attrs:{type:"ios-arrow-down"}}),s("ul",t._l(t.tabBar.children,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.cateClick(e,2)}}},[t._v(" "+t._s(e.name)+" ")])})),0)],1):t._e(),t.tabBar.first?s("Icon",{attrs:{type:"ios-arrow-forward"}}):t._e(),t.tabBar.second?s("div",{staticClass:"bar"},[t._v(" "+t._s(t.tabBar.second.name)+" "),s("Icon",{attrs:{type:"ios-arrow-down"}}),s("ul",t._l(t.tabBar.first.children,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.cateClick(e,3)}}},[t._v(" "+t._s(e.name)+" ")])})),0)],1):t._e(),t.tabBar.second?s("Icon",{attrs:{type:"ios-arrow-forward"}}):t._e()]:[s("div",{staticStyle:{"font-size":"14px"}},[t._v("全部结果")]),s("Icon",{attrs:{type:"ios-arrow-forward"}}),s("div",{staticClass:"mr_10",staticStyle:{"font-weight":"bold"}},[t._v("“"+t._s(t.params.keyword)+"”")])],t._l(t.selectedItem,(function(e,a){return s("a",{key:a,staticClass:"selected-item",attrs:{title:e.name},on:{click:function(s){return t.cancelSelected(e,a)}}},[s("span",[t._v(t._s(e.type)+"：")]),s("span",[t._v(t._s(e.name))]),s("Icon",{attrs:{type:"md-close"}})],1)}))],2),s("div",{staticClass:"content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.tagsContent[0].show&&t.tagsContent[0].values.length,expression:"tagsContent[0].show && tagsContent[0].values.length"}],staticClass:"brand"},[s("div",[s("strong",[t._v(t._s(t.tagsContent[0].key)+"：")])]),s("div",[s("ul",{class:{"show-more":t.tagsContent[0].more}},t._l(t.tagsContent[0].values,(function(e,a){return s("li",{key:a,class:{"border-color":t.multSelected.includes(e)},on:{click:function(s){return t.selectBrand(e.name,0)}}},[s("img",{attrs:{src:e.url,alt:""}}),s("span",[t._v(t._s(e.name))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.multSelected.includes(e.name),expression:"multSelected.includes(item.name)"}],staticClass:"corner-icon"},[s("div"),s("Icon",{attrs:{type:"md-checkmark"}})],1)])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.multiple,expression:"multiple !== 0"}],staticClass:"btn"},[s("span",{on:{click:function(s){return t.moreBrand(0)}}},[t._v(t._s(t.tagsContent[0].more?"收起":"更多")),s("Icon",{attrs:{type:t.tagsContent[0].more?"ios-arrow-up":"ios-arrow-down"}})],1),s("span",{on:{click:function(s){return t.multSelectBrand(0)}}},[s("Icon",{attrs:{type:"md-add"}}),t._v("多选")],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.multiple,expression:"multiple === 0"}],staticClass:"multBtn"},[s("Button",{attrs:{type:"primary",size:"small",disabled:!t.multSelected.length},on:{click:function(s){return t.sure(0)}}},[t._v("确定")]),s("Button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("取消")])],1)])]),t._l(t.tagsContent,(function(e,a){return[e.show&&0!==a?s("div",{directives:[{name:"show",rawName:"v-show",value:a<t.showTagCount,expression:"tagIndex < showTagCount"}],key:a,staticClass:"other"},[s("div",[s("strong",[t._v(t._s(e.key)+"：")])]),s("div",[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.multiple!==a,expression:"multiple !== tagIndex"}],staticClass:"list",class:{"show-more":e.more}},t._l(e.values,(function(e,o){return s("li",{key:o,staticClass:"item",on:{click:function(s){return t.selectBrand(e,a)}}},[t._v(" "+t._s(e)+" ")])})),0),s("CheckboxGroup",{directives:[{name:"show",rawName:"v-show",value:t.multiple===a,expression:"multiple === tagIndex"}],staticClass:"list",class:{"show-more":e.more},model:{value:t.multSelected,callback:function(s){t.multSelected=s},expression:"multSelected"}},t._l(e.values,(function(e,a){return s("Checkbox",{key:a,staticClass:"item",attrs:{label:e}},[t._v(t._s(e))])})),1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.multiple!==a,expression:"multiple !== tagIndex"}],staticClass:"btn"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.values.length>9,expression:"tag.values.length > 9"}],on:{click:function(s){return t.moreBrand(a)}}},[t._v(t._s(e.more?"收起":"更多")),s("Icon",{attrs:{type:e.more?"ios-arrow-up":"ios-arrow-down"}})],1),s("span",{on:{click:function(s){return t.multSelectBrand(a)}}},[s("Icon",{attrs:{type:"md-add"}}),t._v("多选")],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.multiple===a,expression:"multiple === tagIndex"}],staticClass:"multBtn"},[s("Button",{attrs:{type:"primary",size:"small",disabled:!t.multSelected.length},on:{click:function(s){return t.sure(a)}}},[t._v("确定")]),s("Button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("取消")])],1)],1)]):t._e()]})),t.tagsContent.length>4?s("div",{staticClass:"more-options",on:{click:t.moreOptions}},[t._v(" "+t._s(5===t.showTagCount?"更多筛选项":"收起筛选项")+" ")]):t._e()],2)])},r=[],n=e("c40e"),l={name:"GoodsClassNav",data(){return{tabBar:{name:"",first:{},second:{}},showTagCount:5,multiple:!1,tagsContent:[{key:"品牌",more:!1,show:!0,values:[]}],multSelected:[],selectedItem:[],brandIds:[],params:{}}},computed:{cateList(){return this.$store.state.category||[]}},watch:{selectedItem:{handler(t){let s=[];this.params.brandId="",this.params.prop="",t.forEach(t=>{if("品牌"===t.type)this.params.brandId=this.brandIds.join("@");else{const e=t.name.split("、");e.forEach(e=>{s.push(t.type+"_"+e)})}}),this.params.prop=s.join("@"),this.getFilterList(this.params),this.$emit("getParams",this.params)},deep:!0},$route:{handler(t,s){if(this.$route.query.categoryId){let t=this.$route.query.categoryId.split(",");Object.assign(this.params,this.$route.query),this.params.categoryId=t[t.length-1]}else Object.assign(this.params,this.$route.query);this.getFilterList(this.params),this.getNav()},deep:!0}},methods:{getNav(){if(!this.$route.query.categoryId)return;if(!this.cateList.length)return void setTimeout(()=>{this.getNav()},500);const t=this.$route.query.categoryId.split(",");if(t.length>0&&(this.tabBar=this.cateList.filter(s=>s.id===t[0])[0]),t.length>1){const s=this.tabBar.children.filter(s=>s.id===t[1])[0];this.$set(this.tabBar,"first",s)}if(t.length>2){const s=this.tabBar.first.children.filter(s=>s.id===t[2])[0];this.$set(this.tabBar,"second",s)}},cateClick(t,s){switch(s){case 1:this.$router.push({path:"/goodsList",query:{categoryId:t.id}});break;case 2:this.$router.push({path:"/goodsList",query:{categoryId:[t.parentId,t.id].toString()}});break;case 3:this.$router.push({path:"/goodsList",query:{categoryId:[this.tabBar.id,t.parentId,t.id].toString()}});break}},selectBrand(t,s){if(!1!==this.multiple){let s=this.multSelected.indexOf(t);s>-1?this.multSelected.splice(s,1):this.multSelected.push(t)}else if(this.selectedItem.push({type:this.tagsContent[s].key,name:t}),this.tagsContent[s].show=!1,0===s){let s=this.tagsContent[0].values;s.forEach(s=>{s.name===t&&this.brandIds.push(s.value)})}},cancelSelected(t,s){this.selectedItem.splice(s,1),this.tagsContent.forEach((s,e)=>{s.key===t.type&&(s.show=!0,s.more=!1)}),"品牌"===t.type&&(this.brandIds=[])},moreBrand(t){const s=!this.tagsContent[t].more;this.$set(this.tagsContent[t],"more",s)},multSelectBrand(t){this.$set(this.tagsContent[t],"more",!0),this.multiple=t},sure(t){if(this.selectedItem.push({type:this.tagsContent[t].key,name:this.multSelected.join("、")}),0===t){let t=this.tagsContent[0].values;t.forEach(t=>{this.multSelected.includes(t.name)&&this.brandIds.push(t.value)})}this.tagsContent[t].show=!1,this.cancel()},cancel(){this.multSelected=[],this.tagsContent[0].more=!1,this.multiple=!1},getFilterList(t){n["a"](t).then(t=>{if(t.success){const s=t.result;this.tagsContent=[{key:"品牌",more:!1,show:!0,values:[]}],this.tagsContent[0].values=s.brands,this.tagsContent=this.tagsContent.concat(s.paramOptions),this.tagsContent.forEach(t=>{this.$set(t,"show",!0),this.$set(t,"more",!1)})}})},moreOptions(){this.showTagCount=5===this.showTagCount?100:5}},mounted(){if(this.$route.query.categoryId){let t=this.$route.query.categoryId.split(",");Object.assign(this.params,this.$route.query),this.params.categoryId=t[t.length-1]}else Object.assign(this.params,this.$route.query);this.getFilterList(this.params),this.getNav()}},c=l,d=(e("fc66"),e("2877")),h=Object(d["a"])(c,i,r,!1,null,"05092ddc",null),u=h.exports,m={name:"GoodsList",beforeRouteEnter(t,s,e){window.scrollTo(0,0),e()},data(){return{sortIndex:0,sortPriceIndex:!1,goodsTool:[{title:"综合",en:""},{title:"销量",en:"buyCount"},{title:"评论数",en:"commentNum"},{title:"新品",en:"releaseTime"}],goodsList:[],loading:!1,total:0,params:{pageNumber:0,pageSize:20,categoryId:""}}},watch:{$route(){const t=this.$route.query.keyword;if(t&&this.handleSearch(t),this.$route.query.categoryId){let t=this.$route.query.categoryId.split(",");Object.assign(this.params,this.$route.query),this.params.categoryId=t[t.length-1]}this.$route.query.promotionType&&(this.params.promotionType=this.$route.query.promotionType),this.$route.query.promotionsId&&(this.params.promotionsId=this.$route.query.promotionsId),this.getGoodsList()}},methods:{handleSearch(t){this.params.keyword=t,this.$route.query.keyword=t,this.params.pageNumber=0,this.getGoodsList()},orderBy(t,s){this.sortIndex=s,this.params.sort=t,this.params.order="desc","price"===t?(this.sortPriceIndex?"desc"===this.sortPriceIndex?this.sortPriceIndex="asc":this.sortPriceIndex="desc":this.sortPriceIndex="asc",this.params.order=this.sortPriceIndex):this.sortPriceIndex=!1,this.getGoodsList()},goGoodsDetail(t,s){let e=this.$router.resolve({path:"/goodsDetail",query:{skuId:t,goodsId:s}});window.open(e.href,"_blank")},changePageNum(t){this.params.pageNumber=t,this.getGoodsList()},changePageSize(t){this.params.pageNumber=1,this.params.pageSize=t,this.getGoodsList()},getGoodsList(){this.loading=!0,n["c"](this.params).then(t=>{this.loading=!1,t.success&&(this.goodsList=t.result.records,this.total=t.result.total)}).catch(()=>{this.loading=!1})},getParams(t){Object.assign(this.params,t),this.getGoodsList()}},created(){if(this.$route.query.categoryId){let t=this.$route.query.categoryId.split(",");Object.assign(this.params,this.$route.query),this.params.categoryId=t[t.length-1]}else Object.assign(this.params,this.$route.query);this.getGoodsList()},components:{GoodsClassNav:u}},p=m,g=(e("8351"),Object(d["a"])(p,a,o,!1,null,"33093a08",null));s["default"]=g.exports},fc66:function(t,s,e){"use strict";e("441c")}}]);